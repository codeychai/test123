var MLE=MLE||{};
MLE.init=function(a){MLE.forceFPS=a.forceFPS||false;MLE.showDebug=a.showDebug||false;MLE.noCache=true;MLE.mouseScale=1;MLE.mouse=new MouseInput;MLE.keyboard=new KeyboardInput;MLE.wrapper=document.getElementById(a.wrapper||"wrapper");MLE.canvas=document.getElementById(a.canvas||"gameCanvas");if(!MLE.canvas)MLE.canvas=document.createElement("canvas"),MLE.canvas.id="gameCanvas",MLE.wrapper.appendChild(MLE.canvas);MLE.width=a.width||320;MLE.height=a.height||480;MLE.canvas.width=MLE.width;MLE.canvas.height=
MLE.height;MLE.wrapper.style.width=MLE.width+"px";MLE.wrapper.style.height=MLE.height+"px";MLE.context=MLE.canvas.getContext("2d");MLE.scaling=a.scaling||true;MLE.scaling&&MLE.initScaling();MLE.manifest=a.manifest||[];MLE.assets=new MLE.Assets;MLE.preManifest=a.preManifest||[];MLE.preLoader=new MLE.Loader(MLE.preManifest,MLE.startLoader.bind(MLE));MLE.preLoaderScene=a.preLoaderScene;MLE.tick=0;MLE.lastFrameTime=Date.now();MLE.gameType=a.game;MLE.game=null;MLE.cameraX=0;MLE.cameraY=0;MLE.lastCamX=
0;MLE.lastCamY=0;MLE.context.imageSmoothingEnabled=true;MLE.wasRotationBlocked=false;MLE.isiOS7iPhone=navigator.userAgent.match(/(iPad|iPhone|iPod touch);.*CPU.*OS 7_\d/i);if((a=navigator.userAgent.match(/^.*(iPhone|iPad).*(OS\s[0-9]).*(CriOS|Version)\/[.0-9]*\sMobile.*$/i))&&a.length>=3&&a[3]==="CriOS")MLE.isiOS7iPhone=false;if(MLE.isiOS7iPhone)a=document.createElement("div"),a.ontouchmove=function(){},a.id="swipeToFullscreen",document.body.appendChild(a);MLE.swipeToFullscreen=document.getElementById("swipeToFullscreen");
MLE.allowTouchScroll(true);MLE.frameCounter=0;window.addEventListener("focus",MLE.onFocusCallback.bind(MLE),false)};MLE.startLoader=function(){MLE.tick=0;MLE.lastFrameTime=Date.now();MLE.game=new MLE.preLoaderScene;MLE.rotateScene=new RotateScene;MLE.mouse.init();MLE.keyboard.init();MLE.loader=new MLE.Loader(MLE.manifest,function(){});MLE.gameLoop()};MLE.start=function(){setTimeout(function(){createjs.Tween._tweens=[];MLE.context.imageSmoothingEnabled=false;MLE.nextGame=new MLE.gameType},200)};
MLE.initScaling=function(){MLE.sizeHandler();window.addEventListener("resize",function(){MLE.sizeHandler(15)},false);window.addEventListener("orientationchange",function(){MLE.sizeHandler(15)},false)};var cumulTick=0,cumulCounter=0,fps=0;
MLE.gameLoop=function(){MLE.frameCounter+=1;MLE.sizeHandler();var a=true;if(MLE.isiOS7iPhone&&window.innerHeight<320)MLE.swipeToFullscreen.style.display="block",MLE.sizeHandler(),a=(window.innerWidth-150-wrapper.style.width.slice(0,wrapper.style.width.length-2))/2,MLE.wrapper.style.left=a+"px",a=false,MLE.allowTouchScroll(true);if(window.innerHeight>window.innerWidth){if(MLE.allowTouchScroll(false),MLE.sizeHandler(),MLE.rotateScene.orientation=0,MLE.rotateScene.update(),MLE.rotateScene.draw(),MLE.isiOS7iPhone)MLE.swipeToFullscreen.style.display=
"none"}else{if(!MLE.scrollingLocked&&a&&MLE.isiOS7iPhone)MLE.sizeHandler(),MLE.allowTouchScroll(false),MLE.swipeToFullscreen.style.display="none";document.body.style["background-color"]="#000000";if(MLE.nextGame)MLE.game=MLE.nextGame,MLE.nextGame=null;MLE.context.globalAlpha=1;MLE.tick=Date.now()-MLE.lastFrameTime;MLE.lastFrameTime+=MLE.tick;if(MLE.tick>1E3/15)MLE.tick=1E3/15;a=Date.now();createjs.Tween.tick(MLE.tick,false);MLE.keyboard.update();MLE.mouse.update();MLE.game.update();var a=Date.now()-
a,b=Date.now();MLE.game.draw();b=Date.now()-b;cumulTick+=MLE.tick;cumulCounter+=1;cumulTick>1E3&&(cumulTick-=1E3,fps=cumulCounter,cumulCounter=0);if(MLE.showDebug)MLE.context.font="18px sans-serif",MLE.context.textAlign="left",MLE.context.fillStyle="#000000",MLE.context.fillText(fps+"FPS",0,20),MLE.context.fillText("u: "+a+"ms , d: "+b+"ms",0,40);MLE.lastCamX=MLE.cameraX;MLE.lastCamY=MLE.cameraY}MLE.idAnimationFrame=requestAnimationFrame(MLE.gameLoop)};
MLE.allowTouchScroll=function(a){MLE.scrollingLocked=!a;document.ontouchmove=a?function(){}:function(a){a.preventDefault()}};
MLE.sizeHandler=function(a){window.scrollTo(0,0);var b=MLE.width,c=MLE.height,e=window.innerWidth,d=window.innerHeight,e=limitNumber(e,160,12E3),d=limitNumber(d,160,12E3);multiplier=Math.min(d/c,e/b);b*=multiplier;c*=multiplier;e=MLE.wrapper;e.style.display="block";e.style.width=b+"px";e.style.height=c+0+"px";e.style.left=window.innerWidth/2-b/2+"px";e.style.top=window.innerHeight/2-c/2+"px";a&&setTimeout(function(){MLE.sizeHandler(a-1)},500)};
MLE.downCallbacks=function(){MLE.game&&MLE.game.downCallbacks&&MLE.game.downCallbacks()};MLE.upCallbacks=function(){MLE.game&&MLE.game.upCallbacks&&MLE.game.upCallbacks()};MLE.onFocusCallback=function(){console.log("RESETUJ\u0118 ANIMATION FRAME!!!");cancelAnimationFrame(MLE.idAnimationFrame);MLE.gameLoop()};MLE.onBlurCallback=function(){cancelAnimationFrame(MLE.idAnimationFrame)};
(function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame)window.requestAnimationFrame=function(b){var c=(new Date).getTime(),f=Math.max(0,16-(c-a)),g=window.setTimeout(function(){b(c+f)},f);a=c+f;return g};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=
function(a){clearTimeout(a)}})();MLE=MLE||{};MLE.Assets=function(){this.textures={};this.bitmaps={}};MLE.Assets.prototype.addResource=function(a){a.isSpriteSheet?this.addSpriteSheet(a):(this.addTexture(a.id,a.img),this.addBitmap(a.id,a.img))};MLE.Assets.prototype.addBitmap=function(a,b,c){this.bitmaps[a]=new MLE.Bitmap(b,c)};MLE.Assets.prototype.addTexture=function(a,b){this.textures[a]=b};MLE.Assets.prototype.addSpriteSheet=function(a){this.addTexture(a.id,a.img);for(var b in a.descObj)this.addBitmap(b,a.img,a.descObj[b].frame)};
MLE.Assets.prototype.getBitmap=function(a){try{return this.bitmaps[a]===null?null:this.bitmaps[a].clone()}catch(b){console.log("Nie mo\u017ce sklonowa\u0107: ",a)}};MLE=MLE||{};MLE.Util={};MLE.Util.toDeg=function(a){return a*180/Math.PI};MLE.Util.toRad=function(a){return a/180*Math.PI};MLE.Util.mapValue=function(a,b,c,e,d){a=(a-b)/(c-b);b=1-Math.abs(d-e)*a;e<d&&(b=Math.abs(d-e)*a);return b};MLE.Util.sortArray=function(a,b){a.sort(function(a,e){return e[b]-a[b]});return a};
MLE.Util.ajaxRequest=function(){var a=["Msxml2.XMLHTTP","Microsoft.XMLHTTP"];if(window.ActiveXObject)for(var b=0;b<a.length;b++)try{return new ActiveXObject(a[b])}catch(c){}else return window.XMLHttpRequest?new XMLHttpRequest:false};MLE.Util.isCanvasEmpty=function(a){for(var a=a.getContext("2d").getImageData(0,0,a.width,a.height).data,b=0,c=a.length;b<c;b+=4)if(a[b+3])return false;return true};trace=function(){};
Function.prototype.bind=function(a){var b=this;return temp=function(){return b.apply(a,arguments)}};limitNumber=function(a,b,c){return Math.min(c,Math.max(b,a))};function shuffleArray(a){for(var b=a.length-1;b>0;b--){var c=Math.floor(Math.random()*(b+1)),e=a[b];a[b]=a[c];a[c]=e}return a}
var isMobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},any:function(){return isMobile.Android()||isMobile.BlackBerry()||isMobile.iOS()||isMobile.Opera()||isMobile.Windows()}};
Array.prototype.erase=function(a){for(var b=this.length;b--;)this[b]===a&&this.splice(b,1);return this};function getDistance(a,b,c,e){a=Math.abs(a-c);b=Math.abs(b-e);return Math.sqrt(a*a+b*b)};MLE=MLE||{};
MLE.Loader=function(a,b){this.allResources=a.length;this.loadedResources=0;this.onCompleteCallback=b;this.ready=false;this.manifest=a;if(MLE.noCache)for(var c=0;c<this.manifest.length;c++)this.manifest[c].isFaceFont||(this.manifest[c].src+="?"+Date.now()+Math.random()*999999);var e=new PxLoader;this.loader=e;for(c=0;c<a.length;c++)if(a[c].isJSON)this.loadJSON(a[c]);else if(a[c].isFaceFont){var d=new MLE.FaceFont;d.onLoad=this.faceFontLoaded.bind(this);d.loadFont(a[c].src)}else d=new PxLoaderImage(a[c].src),d.id=
a[c].id||null,d.isSpriteSheet=a[c].isSpriteSheet||false,d.descObj=a[c].descObj||null,e.add(d);e.addProgressListener(this.onProgress.bind(this));e.addCompletionListener(this.onComplete.bind(this));e.start()};MLE.Loader.prototype.onProgress=function(a){this.loadedResources+=1;MLE.assets.addResource(a.resource);this.drawProgress(a)};MLE.Loader.prototype.onComplete=function(){this.onLoadAsset()};MLE.Loader.prototype.drawProgress=function(){};
MLE.Loader.prototype.loadJSON=function(a){var b=new MLE.Util.ajaxRequest;b.onreadystatechange=this.onLoadJSON.bind(this);b.open("GET",a.src,true);b.send(null)};MLE.Loader.prototype.onLoadJSON=function(a){a.target.readyState===4&&(a.target.status===200?(this.loadedResources+=1,this.drawProgress(),JSON.parse(a.target.responseText),this.onLoadAsset()):alert("Error with loading json, try to reload!"))};MLE.Loader.prototype.faceFontLoaded=function(){this.loadedResources+=1;this.drawProgress();this.onLoadAsset()};
MLE.Loader.prototype.onLoadAsset=function(){if(this.loadedResources===this.allResources&&(this.ready=true,this.onCompleteCallback))this.onCompleteCallback()};MLE=MLE||{};MLE.Bitmap=function(a,b){this.texture=a;this.rect=b?b:{x:0,y:0,w:a.naturalWidth,h:a.naturalHeight}};MLE.Bitmap.prototype.draw=function(a,b){MLE.context.drawImage(this.texture,this.rect.x,this.rect.y,this.rect.w,this.rect.h,a,b,this.rect.w,this.rect.h)};MLE.Bitmap.prototype.clone=function(){return new MLE.Bitmap(this.texture,this.rect)};MLE=MLE||{};MLE.FrameAnim=function(a,b,c){this.sprite=a;this.frameW=this.sprite.rect.w/b;this.frameH=this.sprite.rect.h/c;this.sprite.pivotX*=this.frameW/this.sprite.rect.w;this.sprite.pivotY*=this.frameH/this.sprite.rect.h;this.anims={};this.currentAnim=null;this.stopped=false;this.cumulTime=0};MLE.FrameAnim.prototype.addAnim=function(a,b,c){this.anims[a]={fps:c,frames:b,currentFrame:0};this.currentFrame=this.anims[a]};
MLE.FrameAnim.prototype.gotoAndPlay=function(a,b){var c;if(b)this.currentAnim=this.anims[b];this.stopped=false;this.currentAnim.currentFrame=a||0;this.cumulTime=0;this.updateSpriteRect()};MLE.FrameAnim.prototype.gotoAndStop=function(a,b){var c;if(b)this.currentAnim=this.anims[b];this.stopped=true;this.currentAnim.currentFrame=a||0;this.cumulTime=0;this.updateSpriteRect()};
MLE.FrameAnim.prototype.update=function(){if(!(this.stopped||this.currentAnim===null))if(this.cumulTime+=MLE.tick,this.cumulTime>1E3/this.currentAnim.fps){this.cumulTime-=1E3/this.currentAnim.fps;if(this.currentAnim.currentFrame===this.currentAnim.frames.length-1&&(this.onLoop(this.currentAnim),this.stopOnLoop)){this.stopped=true;this.updateSpriteRect();return}this.currentAnim.currentFrame=(this.currentAnim.currentFrame+1)%this.currentAnim.frames.length;this.onFrameChange(this.currentAnim,this.currentAnim.currentFrame);
this.updateSpriteRect()}};MLE.FrameAnim.prototype.updateSpriteRect=function(){var a=this.currentAnim.frames[this.currentAnim.currentFrame],b=Math.floor(a/Math.floor(this.sprite.bitmap.rect.w/this.frameW));this.sprite.rect.x=a%Math.floor(this.sprite.bitmap.rect.w/this.frameW)*this.frameW;this.sprite.rect.y=b*this.frameH;this.sprite.rect.w=this.frameW;this.sprite.rect.h=this.frameH};MLE.FrameAnim.prototype.onFrameChange=function(){};MLE.FrameAnim.prototype.onLoop=function(){};
MLE.FrameAnim.prototype.isPlaying=function(a){return this.currentAnim===this.anims[a]&&this.anims[a]?true:false};MLE=MLE||{};MLE.Sprite=function(a,b,c,e){typeof a==="string"&&(a=MLE.assets.getBitmap(a));this.bitmap=a;this.rect=e?e:{x:0,y:0,w:a.rect.w,h:a.rect.h};this.x=b;this.y=c;this.scaleY=this.scaleX=1;this.pivotY=this.pivotX=this.angle=this.skewY=this.skewX=0;this.alpha=1;this.useTransforms=true;this.anchor=false};
MLE.Sprite.prototype.draw=function(){if(this.alpha>1)this.alpha=1;else if(this.alpha<0)this.alpha=0;if(this.alpha!==0){var a=MLE.cameraX,b=MLE.cameraY;if(this.anchor)MLE.cameraX=0,MLE.cameraY=0;if(this.useTransforms||!(this.x+this.pivotX+this.rect.w*this.scaleX<MLE.cameraX||this.x+this.pivotX>MLE.cameraX+MLE.width||this.y+this.pivotY+this.rect.h*this.scaleX<MLE.cameraY||this.y+this.pivotY>MLE.cameraY+MLE.height)){var c=MLE.context.globalAlpha;MLE.context.globalAlpha*=this.alpha;if(this.useTransforms){var e=
MLE.context;e.save();e.translate(Math.floor(this.x-MLE.cameraX),Math.floor(this.y-MLE.cameraY));e.rotate(MLE.Util.toRad(this.angle));e.transform(this.scaleX,Math.tan(MLE.Util.toRad(this.skewY)),Math.tan(MLE.Util.toRad(this.skewX)),this.scaleY,0,0);MLE.context.drawImage(this.bitmap.texture,this.rect.x+this.bitmap.rect.x,this.rect.y+this.bitmap.rect.y,this.rect.w,this.rect.h,-this.pivotX,-this.pivotY,this.rect.w,this.rect.h);e.restore()}else MLE.context.drawImage(this.bitmap.texture,this.rect.x+this.bitmap.rect.x,
this.rect.y+this.bitmap.rect.y,this.rect.w,this.rect.h,Math.floor(this.x-MLE.cameraX),Math.floor(this.y-MLE.cameraY),this.rect.w,this.rect.h);MLE.context.globalAlpha=c}MLE.cameraX=a;MLE.cameraY=b}};MLE.Sprite.prototype.centerPivot=function(){this.pivotX=this.rect.w/2;this.pivotY=this.rect.h/2};MLE=MLE||{};MLE.TextSprite=function(a,b,c,e,d){this.x=b;this.y=c;this.alpha=1;this.text=a||"";this.font=e||"20px Times New Roman";this.align=d||"center";this.color="#ff3333";this.lineHeight=20;this.wrap=9999};MLE.TextSprite.prototype.draw=function(){var a=MLE.context;a.save();a.globalAlpha*=this.alpha;a.font=this.font;a.textAlign=this.align;a.fillStyle=this.color;wrapText(MLE.context,this.text,this.x,this.y,this.wrap,this.lineHeight);a.restore()};
function wrapText(a,b,c,e,d,f){b=b.split("\n");for(d=0;d<b.length;d++)a.fillText(b[d],c,e),e+=f};MLE=MLE||{};MLE.Group=function(){this.y=this.x=0;this.rect={x:0,y:0,w:0,h:0};this.scaleY=this.scaleX=1;this.pivotY=this.pivotX=this.angle=this.skewY=this.skewX=0;this.alpha=1;this.children=[]};
MLE.Group.prototype.draw=function(){if(this.alpha>1)this.alpha=1;else if(this.alpha<0)this.alpha=0;if(this.alpha!==0){var a=MLE.cameraX,b=MLE.cameraY;MLE.cameraX=0;MLE.cameraY=0;var c=MLE.context;c.save();c.globalAlpha*=this.alpha;c.translate(this.x-MLE.cameraX,this.y-MLE.cameraY);c.rotate(MLE.Util.toRad(this.angle));c.transform(this.scaleX,Math.tan(MLE.Util.toRad(this.skewY)),Math.tan(MLE.Util.toRad(this.skewX)),this.scaleY,0,0);c.translate(-this.pivotX,-this.pivotY);this.preDraw();for(var e=0;e<
this.children.length;e++)this.children[e].draw();this.postDraw();c.restore();MLE.cameraX=a;MLE.cameraY=b;c.globalAlpha/=this.alpha}};MLE.Group.prototype.centerPivot=function(){this.pivotX=this.rect.w/2;this.pivotY=this.rect.h/2};MLE.Group.prototype.addChild=function(a){this.children.push(a)};MLE.Group.prototype.addChildInBack=function(a){this.children.unshift(a)};MLE.Group.prototype.preDraw=function(){};MLE.Group.prototype.postDraw=function(){};
MLE.Group.prototype.removeAllTweens=function(){createjs.Tween.removeTweens(this);for(var a=0;a<this.children.length;a++)createjs.Tween.removeTweens(this.children[a])};MLE=MLE||{};MLE.Platformer=function(a){this.sprite=a;this.collisionBox={x:0,y:0,w:a.rect.w,h:a.rect.h};this.gravity=1E3;this.jumpStrength=550;this.maxVelY=this.maxVelX=850;this.accelY=this.accelX=this.velY=this.velX=0;this.isStanding=false;this.platforms=[]};
MLE.Platformer.prototype.update=function(){var a=this.velY;this.isStanding=false;var b=this.sprite.x,c=this.sprite.y,e=this.accelX,e=e*MLE.tick/1E3;b+=MLE.tick/1E3*(this.velX+e/2);this.velX+=e;e=this.gravity+this.accelY;e=e*MLE.tick/1E3;c+=MLE.tick/1E3*(this.velY+e/2);this.velY+=e;if(this.velX>this.maxVelX)this.velX=this.maxVelX;else if(this.velX<-this.maxVelX)this.velX=-this.maxVelX;if(this.velY>this.maxVelY)this.velY=this.maxVelY;else if(this.velY<-this.maxVelY)this.velY=-this.maxVelY;this.checkCollisions(b,
c);if(a<=0&&this.velY>0)this.onFall(),this.isStanding=false};
MLE.Platformer.prototype.checkCollisions=function(a,b){for(var c=null,e=0;e<this.platforms.length;e++){var d=this.platforms[e],f=Math.min(this.sprite.x+this.collisionBox.x,a+this.collisionBox.x),g=Math.max(this.sprite.x+this.collisionBox.x+this.collisionBox.w,a+this.collisionBox.x+this.collisionBox.w),h=d.sprite.x+d.collisionBox.x,i=d.sprite.x+d.collisionBox.x+d.collisionBox.w;if(!(f>i||g<h||h>=i)){var g=this.sprite.y+this.collisionBox.y+this.collisionBox.h,l=b+this.collisionBox.y+this.collisionBox.h,
f=d.sprite.y+d.collisionBox.y;if(g<=f&&l>f&&(g=this.sprite.x+(a-this.sprite.x)*((l-f)/(l-g)),!(g+this.collisionBox.x>i||g+this.collisionBox.x+this.collisionBox.w<h)))b=f-this.collisionBox.h-this.collisionBox.y,this.velY=0,this.isStanding=true,c=d}}this.sprite.x=a;this.sprite.y=b;if(c)c.standingOnIt=true};MLE.Platformer.prototype.onJump=function(){};MLE.Platformer.prototype.onFall=function(){};
MLE.Platformer.prototype.drawDebug=function(){MLE.context.fillStyle="#ff0000";MLE.context.globalAlpha=0.5;MLE.context.fillRect(this.sprite.x+this.collisionBox.x-MLE.cameraX,this.sprite.y+this.collisionBox.y-MLE.cameraY,this.collisionBox.w,this.collisionBox.h);MLE.context.globalAlpha=1};MLE.Platformer.prototype.jump=function(a){this.velY=-a;this.isStanding=false;this.onJump()};MLE=MLE||{};MLE.JumpThru=function(a){this.sprite=a;this.collisionBox={x:0,y:0,w:a.rect.w,h:a.rect.h};this.jumpThruActive=true;this.standingOnIt=false};MLE.JumpThru.prototype.setCollision=function(a,b,c,e){this.collisionBox.x=a;this.collisionBox.y=b;this.collisionBox.w=c;this.collisionBox.h=e};MLE.JumpThru.prototype.drawDebug=function(){};MLE.CollisionCircle=function(a,b,c,e){this.sprite=a;this.x=b;this.y=c;this.r=e};MLE.CollisionCircle.prototype={checkAgainst:function(a){var b=Math.abs(this.sprite.x+this.x-a.x-a.sprite.x),c=Math.abs(this.sprite.y+this.y-a.y-a.sprite.y);return b*b+c*c<(this.r+a.r)*(this.r+a.r)},drawDebug:function(){}};MLE=MLE||{};MLE.Flicker=function(a){this.sprite=a;this.duration=3E3;this.downTime=this.upTime=150;this.cumulTime=0;this.isFlickering=false};MLE.Flicker.prototype.init=function(){};MLE.Flicker.prototype.update=function(){if(this.isFlickering)this.cumulTime+=MLE.tick,this.cumulTime>this.duration?(this.isFlickering=false,this.sprite.alpha=1,this.onEnd()):this.sprite.alpha=this.cumulTime%(this.upTime+this.downTime)<this.downTime?0.2:1};
MLE.Flicker.prototype.startFlick=function(){this.cumulTime=0;this.isFlickering=true};MLE.Flicker.prototype.onEnd=function(){this.sprite.alpha=0};MLE=MLE||{};MLE.UIButton=function(a,b,c){this.sprite=new MLE.Sprite(a,b,c);this.x=b;this.y=c;this.sprite.useTransforms=true;this.sprite.centerPivot();this.sprite.scaleX=1/MLE.mouseScale;this.sprite.scaleY=1/MLE.mouseScale};MLE.UIButton.prototype.init=function(){};
MLE.UIButton.prototype.update=function(){this.sprite.scaleX=1/MLE.mouseScale;this.sprite.scaleY=1/MLE.mouseScale;this.sprite.x=this.x-this.sprite.pivotX/MLE.mouseScale<0?this.sprite.pivotX/MLE.mouseScale:this.x+this.sprite.pivotX/MLE.mouseScale>MLE.width?MLE.width-this.sprite.pivotX/MLE.mouseScale:this.x;this.sprite.y=this.y-this.sprite.pivotY/MLE.mouseScale<0?this.sprite.pivotY/MLE.mouseScale:this.y+this.sprite.pivotY/MLE.mouseScale>MLE.height?MLE.height-this.sprite.pivotY/MLE.mouseScale:this.y};
MLE.UIButton.prototype.draw=function(){this.sprite.draw()};MLE.UIButton.prototype.isClicked=function(){return MLE.mouse.pressed&&MLE.mouse.x>this.x-this.sprite.pivotX/MLE.mouseScale&&MLE.mouse.x<this.x+this.sprite.pivotX/MLE.mouseScale&&MLE.mouse.y>this.y-this.sprite.pivotY/MLE.mouseScale&&MLE.mouse.y<this.y+this.sprite.pivotY/MLE.mouseScale?true:false};MLE=MLE||{};MLE.TouchEventTarget=function(a){this.sprite=a;this.isInside=false;this.collisionBox={x:0,y:0,w:a.rect.w,h:a.rect.h}};MLE.TouchEventTarget.prototype.init=function(){};
MLE.TouchEventTarget.prototype.update=function(){var a=MLE.mouse.pressed,b=MLE.mouse.released,c=MLE.mouse.isDown,e=MLE.mouse.x,d=MLE.mouse.y,f=this.sprite.x-this.sprite.pivotX+this.collisionBox.x-MLE.cameraX,g=this.sprite.y-this.sprite.pivotY+this.collisionBox.y-MLE.cameraY,h=this.collisionBox.w,i=this.collisionBox.h,e=e>f&&e<f+h&&d>g&&d<g+i?true:false;if(c&&e&&!this.isInside)this.isInside=true,this.onIn();if(a&&e)this.onDown();if(c&&!e&&this.isInside)this.isInside=false,this.onOut();if(b&&e)this.onUp()};
MLE.TouchEventTarget.prototype.drawDebug=function(){MLE.context.fillStyle="#ffff00";MLE.context.globalAlpha=0.5;MLE.context.fillRect(this.sprite.x-this.sprite.pivotX+this.collisionBox.x-MLE.cameraX,this.sprite.y-this.sprite.pivotY+this.collisionBox.y-MLE.cameraY,this.collisionBox.w,this.collisionBox.h);MLE.context.globalAlpha=1};MLE.TouchEventTarget.prototype.setArea=function(a,b,c,e){this.collisionBox.x=a;this.collisionBox.y=b;this.collisionBox.w=c;this.collisionBox.h=e};
MLE.TouchEventTarget.prototype.onDown=function(){console.log("onDown")};MLE.TouchEventTarget.prototype.onUp=function(){console.log("onUp")};MLE.TouchEventTarget.prototype.onOut=function(){console.log("onOut")};MLE.TouchEventTarget.prototype.onIn=function(){console.log("onIn")};MLE=MLE||{};MLE.Pin=function(a,b,c,e){this.spriteA=a;this.spriteB=b;this.offsetX=c;this.offsetY=e};MLE.Pin.prototype.update=function(){this.spriteA.x=this.spriteB.x+this.offsetX;this.spriteA.y=this.spriteB.y+this.offsetY};MouseInput=function(){this.screenY=this.screenX=this.y=this.x=0;this.isDown=false;this.event=null;this.pressed=this.released=this._pressed=this._released=this.useTouch=false};
MouseInput.prototype={init:function(a){this.domElement=a;if("ontouchstart"in document.documentElement)this.useTouch=true;this.startListening()},startListening:function(){this.useTouch===true?(MLE.wrapper.addEventListener("touchstart",this.touchStart.bind(this),false),MLE.wrapper.addEventListener("touchmove",this.touchMove.bind(this),false),MLE.wrapper.addEventListener("touchend",this.touchEnd.bind(this),false)):(MLE.wrapper.addEventListener("mousedown",this.onMouseDown.bind(this),false),MLE.wrapper.addEventListener("mousemove",
this.onMouseMove.bind(this),false),MLE.wrapper.addEventListener("mouseup",this.onMouseUp.bind(this),false));window.addEventListener("focus",this.reset.bind(this),false);window.addEventListener("blur",this.reset.bind(this),false)},stopListening:function(){this.useTouch===true?(MLE.wrapper.removeEventListener("touchmove",this.touchMove.bind(this)),MLE.wrapper.removeEventListener("touchend",this.touchEnd.bind(this))):(MLE.wrapper.removeEventListener("mousemove",this.onMouseMove.bind(this)),MLE.wrapper.removeEventListener("mouseup",
this.onMouseUp.bind(this)))},destroy:function(){this.stopListening()},update:function(){this.released=this._released;this.pressed=this._pressed;this._pressed=this._released=false;var a=wrapper.style.width.slice(0,wrapper.style.width.length-2)/MLE.width,b=wrapper.style.height.slice(0,wrapper.style.height.length-2)/MLE.height;a===0&&(a=b=1);MLE.mouseScale=a;this.x=Math.floor((this.screenX-wrapper.offsetLeft)/a);this.y=Math.floor((this.screenY-wrapper.offsetTop)/b)},onMouseMove:function(a){a.preventDefault();
this.screenX=a.pageX;this.screenY=a.pageY},onMouseDown:function(a){a.preventDefault();this._pressed=this.isDown=true;this.event=a;this.screenX=a.pageX;this.screenY=a.pageY;this.update();MLE.downCallbacks();this._pressed=this.isDown=true;this.event=a;this.screenX=a.pageX;this.screenY=a.pageY},onMouseUp:function(a){if(this.isDown===true)this._released=true,this.isDown=false,this.event=a,this.update(),MLE.upCallbacks(),this._released=true,this.isDown=false,this.event=a},touchStart:function(a){a.preventDefault();
this._pressed=this.isDown=true;this.screenX=a.targetTouches[0].pageX;this.screenY=a.targetTouches[0].pageY;this.update();MLE.downCallbacks();this._pressed=this.isDown=true;this.screenX=a.targetTouches[0].pageX;this.screenY=a.targetTouches[0].pageY},touchMove:function(a){a.preventDefault();this.screenX=a.targetTouches[0].pageX;this.screenY=a.targetTouches[0].pageY},touchEnd:function(){this.isDown=false;this._released=true;this.update();MLE.upCallbacks();this.isDown=false;this._released=true},clickEnd:function(){gotoSpilSite()},
reset:function(){console.log("RESET!!!");this.screenY=this.screenX=this.y=this.x=0;this.isDown=false;this.event=null;this.pressed=this.released=this._pressed=this._released=this.useTouch=false}};KeyboardInput=function(){this.key=0;this._released=this._pressed=this.released=this.pressed=this.hasKeyboard=this.isDown=false};
KeyboardInput.prototype={init:function(){if("onkeyup"in document.documentElement)this.hasKeyboard=true,this.startListening()},startListening:function(){document.body.addEventListener("keyup",this.keyUp.bind(this),false);document.body.addEventListener("keydown",this.keyDown.bind(this),false)},keyDown:function(a){if(!(this.key==-1&&a.keyCode==37)&&!(this.key==1&&a.keyCode==39))if(a.keyCode==37)this.key=-1,this.isDown=this._pressed=true;else if(a.keyCode==39)this.key=1,this.isDown=this._pressed=true},
keyUp:function(a){this.key==-1&&a.keyCode==37?(this.key=0,this._released=true,this.isDown=false):this.key==1&&a.keyCode==39?(this.key=0,this._released=true,this.isDown=false):a.keyCode>48&&a.keyCode<56?(console.log("Produkuje powerupa",a.keyCode-48),gameScene&&gameScene.spawnPowerUp(Math.random()*(MLE.width-getConst(200))+getConst(100),Math.random()*getConst(500)+getConst(75),-1,a.keyCode-48,true)):a.keyCode===48&&(console.log("Produkuje rep",a.keyCode-48),gameScene&&gameScene.spawnRepairPart(Math.random()*
(MLE.width-getConst(200))+getConst(100),Math.random()*getConst(500)+getConst(75),-1,true))},update:function(){this.released=this._released;this.pressed=this._pressed;this._pressed=this._released=false}};MLE=MLE||{};MLE.FaceFont=function(){};MLE.FaceFont.prototype.loadFont=function(a){var b=document.createElement("canvas");b.width=64;b.height=64;var c=b.getContext("2d"),e=setInterval(function(){c.clearRect(0,0,64,64);c.font="32px "+a;c.fillStyle="#ffffff";c.fillText("test",32,32);MLE.context.drawImage(b,100,100);var d=MLE.Util.isCanvasEmpty(b);c.font!=="10px sans-serif"&&!d&&(this.onLoad(a),clearInterval(e))}.bind(this),500)};MLE.FaceFont.prototype.onLoad=function(){};var JSON;JSON||(JSON={});
(function(){function a(a){return a<10?"0"+a:a}function b(a){d.lastIndex=0;return d.test(a)?'"'+a.replace(d,function(a){var b=h[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,e){var d,h,o,p,q=f,k,j=e[a];j&&typeof j==="object"&&typeof j.toJSON==="function"&&(j=j.toJSON(a));typeof i==="function"&&(j=i.call(e,a,j));switch(typeof j){case "string":return b(j);case "number":return isFinite(j)?String(j):"null";case "boolean":case "null":return String(j);case "object":if(!j)return"null";
f+=g;k=[];if(Object.prototype.toString.apply(j)==="[object Array]"){p=j.length;for(d=0;d<p;d+=1)k[d]=c(d,j)||"null";o=k.length===0?"[]":f?"[\n"+f+k.join(",\n"+f)+"\n"+q+"]":"["+k.join(",")+"]";f=q;return o}if(i&&typeof i==="object"){p=i.length;for(d=0;d<p;d+=1)typeof i[d]==="string"&&(h=i[d],(o=c(h,j))&&k.push(b(h)+(f?": ":":")+o))}else for(h in j)Object.prototype.hasOwnProperty.call(j,h)&&(o=c(h,j))&&k.push(b(h)+(f?": ":":")+o);o=k.length===0?"{}":f?"{\n"+f+k.join(",\n"+f)+"\n"+q+"}":"{"+k.join(",")+
"}";f=q;return o}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
d=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,g,h={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},i;if(typeof JSON.stringify!=="function")JSON.stringify=function(a,b,e){var d;g=f="";if(typeof e==="number")for(d=0;d<e;d+=1)g+=" ";else typeof e==="string"&&(g=e);if((i=b)&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number"))throw Error("JSON.stringify");return c("",
{"":a})};if(typeof JSON.parse!=="function")JSON.parse=function(a,b){function c(a,e){var d,f,g=a[e];if(g&&typeof g==="object")for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(f=c(g,d),f!==void 0?g[d]=f:delete g[d]);return b.call(a,e,g)}var d,a=String(a);e.lastIndex=0;e.test(a)&&(a=a.replace(e,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),typeof b==="function"?c({"":d},""):d;throw new SyntaxError("JSON.parse");}})();var createjs=this.createjs=this.createjs||{};
(function(){var a=function(){this.initialize()},b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener;a.removeEventListener=b.removeEventListener;a.removeAllEventListeners=b.removeAllEventListeners;a.hasEventListener=b.hasEventListener;a.dispatchEvent=b.dispatchEvent};b._listeners=null;b.initialize=function(){};b.addEventListener=function(a,b){var d=this._listeners;d?this.removeEventListener(a,b):d=this._listeners={};var f=d[a];f||(f=d[a]=[]);f.push(b);return b};b.removeEventListener=
function(a,b){var d=this._listeners;if(d){var f=d[a];if(f)for(var g=0,h=f.length;g<h;g++)if(f[g]==b){1==h?delete d[a]:f.splice(g,1);break}}};b.removeAllEventListeners=function(a){a?this._listeners&&delete this._listeners[a]:this._listeners=null};b.dispatchEvent=function(a,b){var d=false,f=this._listeners;if(a&&f){"string"==typeof a&&(a={type:a});a.target=b||this;f=f[a.type];if(!f)return d;for(var f=f.slice(),g=0,h=f.length;g<h;g++){var i=f[g];i instanceof Function?d=d||i.apply(null,[a]):i.handleEvent&&
(d=d||i.handleEvent(a))}}return!!d};b.hasEventListener=function(a){var b=this._listeners;return!(!b||!b[a])};b.toString=function(){return"[EventDispatcher]"};createjs.EventDispatcher=a})();this.createjs=this.createjs||{};
(function(){var a=function(a,b,d){this.initialize(a,b,d)},b=a.prototype;a.NONE=0;a.LOOP=1;a.REVERSE=2;a.IGNORE={};a._tweens=[];a._plugins={};a.get=function(b,e,d,f){f&&a.removeTweens(b);return new a(b,e,d)};a.tick=function(b,e){for(var d=a._tweens.slice(),f=d.length-1;0<=f;f--){var g=d[f];e&&!g.ignoreGlobalPause||g._paused||g.tick(g._useTicks?1:b)}};createjs.Ticker&&createjs.Ticker.addListener(a,false);a.removeTweens=function(b){if(b.tweenjs_count){for(var e=a._tweens,d=e.length-1;0<=d;d--)e[d]._target==
b&&(e[d]._paused=true,e.splice(d,1));b.tweenjs_count=0}};a.hasActiveTweens=function(b){return b?b.tweenjs_count:a._tweens&&a._tweens.length};a.installPlugin=function(b,e){var d=b.priority;null==d&&(b.priority=d=0);for(var f=0,g=e.length,h=a._plugins;f<g;f++){var i=e[f];if(h[i]){for(var l=h[i],m=0,t=l.length;m<t&&!(d<l[m].priority);m++);h[i].splice(m,0,b)}else h[i]=[b]}};a._register=function(b,e){var d=b._target;e?(d&&(d.tweenjs_count=d.tweenjs_count?d.tweenjs_count+1:1),a._tweens.push(b)):(d&&d.tweenjs_count--,
d=a._tweens.indexOf(b),-1!=d&&a._tweens.splice(d,1))};b.addEventListener=null;b.removeEventListener=null;b.removeAllEventListeners=null;b.dispatchEvent=null;b.hasEventListener=null;b._listeners=null;createjs.EventDispatcher.initialize(b);b.ignoreGlobalPause=false;b.loop=false;b.duration=0;b.pluginData=null;b.onChange=null;b.change=null;b.target=null;b.position=null;b._paused=false;b._curQueueProps=null;b._initQueueProps=null;b._steps=null;b._actions=null;b._prevPosition=0;b._stepPosition=0;b._prevPos=
-1;b._target=null;b._useTicks=false;b.initialize=function(b,e,d){this.target=this._target=b;e&&(this._useTicks=e.useTicks,this.ignoreGlobalPause=e.ignoreGlobalPause,this.loop=e.loop,this.onChange=e.onChange,e.override&&a.removeTweens(b));this.pluginData=d||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];e&&e.paused?this._paused=true:a._register(this,true);e&&null!=e.position&&this.setPosition(e.position,a.NONE)};b.wait=function(a){if(null==a||0>=a)return this;var b=
this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:b,e:this._linearEase,p1:b})};b.to=function(a,b,d){if(isNaN(b)||0>b)b=0;return this._addStep({d:b||0,p0:this._cloneProps(this._curQueueProps),e:d,p1:this._cloneProps(this._appendQueueProps(a))})};b.call=function(a,b,d){return this._addAction({f:a,p:b?b:[this],o:d?d:this._target})};b.set=function(a,b){return this._addAction({f:this._set,o:this,p:[a,b?b:this._target]})};b.play=function(a){return this.call(a.setPaused,[false],a)};b.pause=
function(a){a||(a=this);return this.call(a.setPaused,[true],a)};b.setPosition=function(a,b){0>a&&(a=0);null==b&&(b=1);var d=a,f=false;d>=this.duration&&(this.loop?d%=this.duration:(d=this.duration,f=true));if(d==this._prevPos)return f;var g=this._prevPos;this.position=this._prevPos=d;this._prevPosition=a;if(this._target)if(f)this._updateTargetProps(null,1);else if(0<this._steps.length){for(var h=0,i=this._steps.length;h<i&&!(this._steps[h].t>d);h++);h=this._steps[h-1];this._updateTargetProps(h,(this._stepPosition=
d-h.t)/h.d)}0!=b&&0<this._actions.length&&(this._useTicks?this._runActions(d,d):1==b&&d<g?(g!=this.duration&&this._runActions(g,this.duration),this._runActions(0,d,true)):this._runActions(g,d));f&&this.setPaused(true);this.onChange&&this.onChange(this);this.dispatchEvent("change");return f};b.tick=function(a){this._paused||this.setPosition(this._prevPosition+a)};b.setPaused=function(b){this._paused=!!b;a._register(this,!b);return this};b.w=b.wait;b.t=b.to;b.c=b.call;b.s=b.set;b.toString=function(){return"[Tween]"};
b.clone=function(){throw"Tween can not be cloned.";};b._updateTargetProps=function(b,e){var d,f,g,h;!b&&1==e?d=f=this._curQueueProps:(b.e&&(e=b.e(e,0,1,1)),d=b.p0,f=b.p1);for(n in this._initQueueProps){if(null==(g=d[n]))d[n]=g=this._initQueueProps[n];if(null==(h=f[n]))f[n]=h=g;g=g==h||0==e||1==e||"number"!=typeof g?1==e?h:g:g+(h-g)*e;var i=false;if(h=a._plugins[n])for(var l=0,m=h.length;l<m;l++){var t=h[l].tween(this,n,g,d,f,e,!!b&&d==f,!b);t==a.IGNORE?i=true:g=t}i||(this._target[n]=g)}};b._runActions=
function(a,b,d){var f=a,g=b,h=-1,i=this._actions.length,l=1;for(a>b&&(f=b,g=a,h=i,i=l=-1);(h+=l)!=i;){var b=this._actions[h],m=b.t;(m==g||m>f&&m<g||d&&m==a)&&b.f.apply(b.o,b.p)}};b._appendQueueProps=function(b){var e,d,f,g,h,i;for(i in b){if(void 0===this._initQueueProps[i]){d=this._target[i];if(e=a._plugins[i]){f=0;for(g=e.length;f<g;f++)d=e[f].init(this,i,d)}this._initQueueProps[i]=void 0===d?null:d}else d=this._curQueueProps[i];if(e=a._plugins[i]){h=h||{};f=0;for(g=e.length;f<g;f++)e[f].step&&
e[f].step(this,i,d,b[i],h)}this._curQueueProps[i]=b[i]}h&&this._appendQueueProps(h);return this._curQueueProps};b._cloneProps=function(a){var b={},d;for(d in a)b[d]=a[d];return b};b._addStep=function(a){0<a.d&&(this._steps.push(a),a.t=this.duration,this.duration+=a.d);return this};b._addAction=function(a){a.t=this.duration;this._actions.push(a);return this};b._set=function(a,b){for(var d in a)b[d]=a[d]};createjs.Tween=a})();this.createjs=this.createjs||{};
(function(){var a=function(a,b,d){this.initialize(a,b,d)},b=a.prototype;b.ignoreGlobalPause=false;b.duration=0;b.loop=false;b.onChange=null;b.position=null;b._paused=false;b._tweens=null;b._labels=null;b._prevPosition=0;b._prevPos=-1;b._useTicks=false;b.initialize=function(a,b,d){this._tweens=[];d&&(this._useTicks=d.useTicks,this.loop=d.loop,this.ignoreGlobalPause=d.ignoreGlobalPause,this.onChange=d.onChange);a&&this.addTween.apply(this,a);this.setLabels(b);d&&d.paused?this._paused=true:createjs.Tween._register(this,
true);d&&null!=d.position&&this.setPosition(d.position,createjs.Tween.NONE)};b.addTween=function(a){var b=arguments.length;if(1<b){for(var d=0;d<b;d++)this.addTween(arguments[d]);return arguments[0]}if(0==b)return null;this.removeTween(a);this._tweens.push(a);a.setPaused(true);a._paused=false;a._useTicks=this._useTicks;a.duration>this.duration&&(this.duration=a.duration);0<=this._prevPos&&a.setPosition(this._prevPos,createjs.Tween.NONE);return a};b.removeTween=function(a){var b=arguments.length;if(1<
b){for(var d=true,f=0;f<b;f++)d=d&&this.removeTween(arguments[f]);return d}if(0==b)return false;b=this._tweens.indexOf(a);return-1!=b?(this._tweens.splice(b,1),a.duration>=this.duration&&this.updateDuration(),true):false};b.addLabel=function(a,b){this._labels[a]=b};b.setLabels=function(a){this._labels=a?a:{}};b.gotoAndPlay=function(a){this.setPaused(false);this._goto(a)};b.gotoAndStop=function(a){this.setPaused(true);this._goto(a)};b.setPosition=function(a,b){0>a&&(a=0);var d=this.loop?a%this.duration:
a,f=!this.loop&&a>=this.duration;if(d==this._prevPos)return f;this._prevPosition=a;this.position=this._prevPos=d;for(var g=0,h=this._tweens.length;g<h;g++)if(this._tweens[g].setPosition(d,b),d!=this._prevPos)return false;f&&this.setPaused(true);this.onChange&&this.onChange(this);return f};b.setPaused=function(a){this._paused=!!a;createjs.Tween._register(this,!a)};b.updateDuration=function(){for(var a=this.duration=0,b=this._tweens.length;a<b;a++)tween=this._tweens[a],tween.duration>this.duration&&
(this.duration=tween.duration)};b.tick=function(a){this.setPosition(this._prevPosition+a)};b.resolve=function(a){var b=parseFloat(a);isNaN(b)&&(b=this._labels[a]);return b};b.toString=function(){return"[Timeline]"};b.clone=function(){throw"Timeline can not be cloned.";};b._goto=function(a){a=this.resolve(a);null!=a&&this.setPosition(a)};createjs.Timeline=a})();this.createjs=this.createjs||{};
(function(){var a=function(){throw"Ease cannot be instantiated.";};a.linear=function(a){return a};a.none=a.linear;a.get=function(a){-1>a&&(a=-1);1<a&&(a=1);return function(c){return 0==a?c:0>a?c*(c*-a+1+a):c*((2-c)*a+(1-a))}};a.getPowIn=function(a){return function(c){return Math.pow(c,a)}};a.getPowOut=function(a){return function(c){return 1-Math.pow(1-c,a)}};a.getPowInOut=function(a){return function(c){return 1>(c*=2)?0.5*Math.pow(c,a):1-0.5*Math.abs(Math.pow(2-c,a))}};a.quadIn=a.getPowIn(2);a.quadOut=
a.getPowOut(2);a.quadInOut=a.getPowInOut(2);a.cubicIn=a.getPowIn(3);a.cubicOut=a.getPowOut(3);a.cubicInOut=a.getPowInOut(3);a.quartIn=a.getPowIn(4);a.quartOut=a.getPowOut(4);a.quartInOut=a.getPowInOut(4);a.quintIn=a.getPowIn(5);a.quintOut=a.getPowOut(5);a.quintInOut=a.getPowInOut(5);a.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)};a.sineOut=function(a){return Math.sin(a*Math.PI/2)};a.sineInOut=function(a){return-0.5*(Math.cos(Math.PI*a)-1)};a.getBackIn=function(a){return function(c){return c*
c*((a+1)*c-a)}};a.backIn=a.getBackIn(1.7);a.getBackOut=function(a){return function(c){return--c*c*((a+1)*c+a)+1}};a.backOut=a.getBackOut(1.7);a.getBackInOut=function(a){a*=1.525;return function(c){return 1>(c*=2)?0.5*c*c*((a+1)*c-a):0.5*((c-=2)*c*((a+1)*c+a)+2)}};a.backInOut=a.getBackInOut(1.7);a.circIn=function(a){return-(Math.sqrt(1-a*a)-1)};a.circOut=function(a){return Math.sqrt(1- --a*a)};a.circInOut=function(a){return 1>(a*=2)?-0.5*(Math.sqrt(1-a*a)-1):0.5*(Math.sqrt(1-(a-=2)*a)+1)};a.bounceIn=
function(b){return 1-a.bounceOut(1-b)};a.bounceOut=function(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+0.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+0.9375:7.5625*(a-=2.625/2.75)*a+0.984375};a.bounceInOut=function(b){return 0.5>b?0.5*a.bounceIn(2*b):0.5*a.bounceOut(2*b-1)+0.5};a.getElasticIn=function(a,c){var e=2*Math.PI;return function(d){if(0==d||1==d)return d;var f=c/e*Math.asin(1/a);return-(a*Math.pow(2,10*(d-=1))*Math.sin((d-f)*e/c))}};a.elasticIn=a.getElasticIn(1,0.3);a.getElasticOut=
function(a,c){var e=2*Math.PI;return function(d){if(0==d||1==d)return d;var f=c/e*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-f)*e/c)+1}};a.elasticOut=a.getElasticOut(1,0.3);a.getElasticInOut=function(a,c){var e=2*Math.PI;return function(d){var f=c/e*Math.asin(1/a);return 1>(d*=2)?-0.5*a*Math.pow(2,10*(d-=1))*Math.sin((d-f)*e/c):0.5*a*Math.pow(2,-10*(d-=1))*Math.sin((d-f)*e/c)+1}};a.elasticInOut=a.getElasticInOut(1,0.3*1.5);createjs.Ease=a})();this.createjs=this.createjs||{};
(function(){var a=function(){throw"MotionGuidePlugin cannot be instantiated.";};a.priority=0;a.install=function(){createjs.Tween.installPlugin(a,["guide","x","y","rotation"]);return createjs.Tween.IGNORE};a.init=function(a,c,e){a=a.target;a.hasOwnProperty("x")||(a.x=0);a.hasOwnProperty("y")||(a.y=0);a.hasOwnProperty("rotation")||(a.rotation=0);return"guide"==c?null:e};a.step=function(b,c,e,d,f){if("guide"!=c)return d;var g;d.hasOwnProperty("path")||(d.path=[]);b=d.path;d.hasOwnProperty("end")||(d.end=
1);d.hasOwnProperty("start")||(d.start=e&&e.hasOwnProperty("end")&&e.path===b?e.end:0);if(d.hasOwnProperty("_segments")&&d._length)return d;e=b.length;if(6<=e&&0==(e-2)%4){d._segments=[];d._length=0;for(c=2;c<e;c+=4){for(var h=b[c-2],i=b[c-1],l=b[c+0],m=b[c+1],t=b[c+2],v=b[c+3],o=h,p=i,q,k,j=0,s=[],u=1;10>=u;u++){k=u/10;var r=1-k;q=r*r*h+2*r*k*l+k*k*t;k=r*r*i+2*r*k*m+k*k*v;j+=s[s.push(Math.sqrt((g=q-o)*g+(g=k-p)*g))-1];o=q;p=k}d._segments.push(j);d._segments.push(s);d._length+=j}}else throw"invalid 'path' data, please see documentation for valid paths";
g=d.orient;d.orient=false;a.calc(d,d.end,f);d.orient=g;return d};a.tween=function(b,c,e,d,f,g,h){f=f.guide;if(void 0==f||f===d.guide)return e;f.lastRatio!=g&&(a.calc(f,(f.end-f.start)*(h?f.end:g)+f.start,b.target),f.orient&&(b.target.rotation+=d.rotation||0),f.lastRatio=g);return!f.orient&&"rotation"==c?e:b.target[c]};a.calc=function(b,c,e){void 0==b._segments&&a.validate(b);void 0==e&&(e={x:0,y:0,rotation:0});for(var d=b._segments,f=b.path,g=b._length*c,h=d.length-2,c=0;g>d[c]&&c<h;)g-=d[c],c+=2;
for(var d=d[c+1],i=0,h=d.length-1;g>d[i]&&i<h;)g-=d[i],i++;g=i/++h+g/(h*d[i]);c=2*c+2;h=1-g;e.x=h*h*f[c-2]+2*h*g*f[c+0]+g*g*f[c+2];e.y=h*h*f[c-1]+2*h*g*f[c+1]+g*g*f[c+3];b.orient&&(e.rotation=57.2957795*Math.atan2((f[c+1]-f[c-1])*h+(f[c+3]-f[c+1])*g,(f[c+0]-f[c-2])*h+(f[c+2]-f[c+0])*g));return e};createjs.MotionGuidePlugin=a})();(function(){var a=this.createjs=this.createjs||{},a=a.TweenJS=a.TweenJS||{};a.version="0.4.0";a.buildDate="Tue, 12 Feb 2013 21:09:02 GMT"})();function PxLoader(a){a=a||{};if(a.statusInterval==null)a.statusInterval=5E3;if(a.loggingDelay==null)a.loggingDelay=2E4;if(a.noProgressTimeout==null)a.noProgressTimeout=Infinity;var b=[],c=[],e,d=+new Date;this.add=function(a){a.tags=new PxLoaderTags(a.tags);if(a.priority==null)a.priority=Infinity;b.push({resource:a,status:0})};this.addProgressListener=function(a,b){c.push({callback:a,tags:new PxLoaderTags(b)})};this.addCompletionListener=function(a,b){c.push({tags:new PxLoaderTags(b),callback:function(b){b.completedCount===
b.totalCount&&a(b)}})};var f=function(a){var a=a==null?[]:Array.isArray(a)?a:[a],b=function(b){for(var b=b.resource,c=Infinity,d=0;d<b.tags.length;d++)for(var e=0;e<Math.min(a.length,c);e++){if(b.tags[d]==a[e]&&e<c&&(c=e,c===0))break;if(c===0)break}return c};return function(a,c){var d=b(a),e=b(c);return d<e?-1:d>e?1:a.priority<c.priority?-1:a.priority>c.priority?1:0}};this.start=function(a){e=+new Date;a=f(a);b.sort(a);for(var a=0,c=b.length;a<c;a++){var d=b[a];d.status=1;d.resource.start(this)}setTimeout(g,
100)};var g=function(){for(var c=false,e=+new Date-d,f=e>=a.noProgressTimeout,e=e>=a.loggingDelay,h=0,o=b.length;h<o;h++){var p=b[h];if(p.status===1&&(p.resource.checkStatus&&p.resource.checkStatus(),p.status===1))if(f)p.resource.onTimeout();else c=true}e&&c&&i();c&&setTimeout(g,a.statusInterval)};this.isBusy=function(){for(var a=0,c=b.length;a<c;a++)if(b[a].status===0||b[a].status===1)return true;return false};var h=function(a,e){for(var f=null,g=0,h=b.length;g<h;g++)if(b[g].resource===a){f=b[g];
break}if(!(f==null||f.status!==1)){f.status=e;d=+new Date;g=0;for(h=c.length;g<h;g++){var i=c[g];if(i.tags.length===0||a.tags.contains(i.tags)){for(var q=f,k=0,j=0,s=0,u=b.length;s<u;s++){var r=b[s],w=false;if(w=i.tags.length===0?true:r.resource.tags.contains(i.tags))j++,(r.status===2||r.status===3||r.status===4)&&k++}i.callback({resource:q.resource,loaded:q.status===2,error:q.status===3,timeout:q.status===4,completedCount:k,totalCount:j})}}}};this.onLoad=function(a){h(a,2)};this.onError=function(a){h(a,
3)};this.onTimeout=function(a){h(a,4)};var i=this.log=function(a){if(window.console){var c=Math.round((+new Date-e)/1E3);window.console.log("PxLoader elapsed: "+c+" sec");for(var c=0,d=b.length;c<d;c++){var f=b[c];if(a||f.status===1){var g="PxLoader: #"+c+" "+f.resource.getName();switch(f.status){case 0:g+=" (Not Started)";break;case 1:g+=" (Waiting)";break;case 2:g+=" (Loaded)";break;case 3:g+=" (Error)";break;case 4:g+=" (Timeout)"}f.resource.tags.length>0&&(g+=" Tags: ["+f.resource.tags.array.join(",")+
"]");window.console.log(g)}}}}}
function PxLoaderTags(a){this.array=[];this.object={};this.value=null;this.length=0;if(a!==null&&a!==void 0){if(Array.isArray(a))this.array=a;else if(typeof a==="object")for(var b in a)this.array.push(b);else this.array.push(a),this.value=a;this.length=this.array.length;for(a=0;a<this.length;a++)this.object[this.array[a]]=true}this.contains=function(a){if(this.length===0||a.length===0)return false;else if(this.length===1&&this.value!==null)return a.length===1?this.value===a.value:a.object.hasOwnProperty(this.value);
else if(a.length<this.length)return a.contains(this);else{for(var b in this.object)if(a.object[b])return true;return false}}}if(!Array.isArray)Array.isArray=function(a){return Object.prototype.toString.call(a)=="[object Array]"};function PxLoaderImage(a,b,c){var e=this,d=null;this.img=new Image;this.tags=b;this.priority=c;var f=function(){e.img.readyState=="complete"&&(i(),d.onLoad(e))},g=function(){i();d.onLoad(e)},h=function(){i();d.onError(e)},i=function(){e.unbind("load",g);e.unbind("readystatechange",f);e.unbind("error",h)};this.start=function(b){d=b;e.bind("load",g);e.bind("readystatechange",f);e.bind("error",h);e.img.src=a};this.checkStatus=function(){e.img.complete&&(i(),d.onLoad(e))};this.onTimeout=function(){i();
if(e.img.complete)d.onLoad(e);else d.onTimeout(e)};this.getName=function(){return a};this.bind=function(a,b){e.img.addEventListener?e.img.addEventListener(a,b,false):e.img.attachEvent&&e.img.attachEvent("on"+a,b)};this.unbind=function(a,b){e.img.removeEventListener?e.img.removeEventListener(a,b,false):e.img.detachEvent&&e.img.detachEvent("on"+a,b)}}PxLoader.prototype.addImage=function(a,b,c){a=new PxLoaderImage(a,b,c);this.add(a);return a.img};var Director=function(){window.director=this;this.init()};Director.prototype.init=function(){window.game=this;this.menu=this.currentScene=new Menu;this.nextScene=null;this.rectAlpha=1;this.rectColor="#ffffff";createjs.Tween.get(this).to({rectAlpha:0},250,createjs.Ease.sineInOut)};Director.prototype.update=function(){this.currentScene&&this.currentScene.update()};
Director.prototype.draw=function(){this.currentScene&&this.currentScene.draw();if(this.nextScene)this.currentScene=this.nextScene,this.nextScene=null,MLE.cameraX=MLE.cameraY=0;if(this.rectAlpha>0)MLE.context.fillStyle=this.rectColor,MLE.context.globalAlpha=this.rectAlpha,MLE.context.fillRect(0,0,MLE.width,MLE.height),MLE.context.globalAlpha=1};Director.prototype.downCallbacks=function(){this.currentScene&&this.currentScene.downCallbacks&&this.currentScene.downCallbacks()};
Director.prototype.upCallbacks=function(){this.currentScene&&this.currentScene.upCallbacks&&this.currentScene.upCallbacks()};var PreLoaderScene=function(){this.init()};
PreLoaderScene.prototype.init=function(){window.preloaderScene=this;this.logo=new MLE.Sprite("logo",MLE.width/2,MLE.height/2+getConst(-60));this.logo.centerPivot();this.logo.scaleX=this.logo.scaleY=1.4;this.progressBar=new MLE.Sprite("progressBar",MLE.width/2,MLE.height/2+200);this.progressAnim=new MLE.FrameAnim(this.progressBar,1,4);this.progressAnim.addAnim("progress",[0,1,2,3],10);this.progressAnim.gotoAndPlay(0,"progress");this.progressBar.centerPivot();this.progressBar.scaleX=this.progressBar.scaleY=
1.75;this.loaded=false;this.touchEventTarget=new MLE.TouchEventTarget(this.logo);this.touchEventTarget.onDown=gotoSpilSite2};PreLoaderScene.prototype.update=function(){this.percent=MLE.loader.loadedResources/MLE.loader.allResources*100;this.progressAnim.update();if(this.percent===100&&this.loaded===false)this.loaded=true,createjs.Tween.get(this.progressBar).to({alpha:0},350).wait(3E3).call(function(){MLE.start()}),createjs.Tween.get(this.logo).wait(350).to({y:MLE.height/2},750,createjs.Ease.sineInOut)};
PreLoaderScene.prototype.draw=function(){MLE.context.fillStyle="#f9f1f7";MLE.context.fillRect(0,0,MLE.width,MLE.height);this.logo.draw();this.progressBar.draw()};PreLoaderScene.prototype.downCallbacks=function(){console.log("KLIK W PRELOADERZE!");this.touchEventTarget.update()};var RotateScene=function(){this.init()};RotateScene.prototype.init=function(){window.rotateScene=this;this.rotateImage=new MLE.Sprite("rotate",MLE.width/2,MLE.height/2);this.rotateImage.scaleX=this.rotateImage.scaleY=1.75;this.rotateImage.centerPivot()};RotateScene.prototype.update=function(){document.body.style["background-color"]="#f9f1f7"};RotateScene.prototype.draw=function(){MLE.context.fillStyle="#f9f1f7";MLE.context.fillRect(0,0,MLE.width,MLE.height);this.rotateImage.draw()};var TitleScene=function(){this.init()};TitleScene.prototype.init=function(){};TitleScene.prototype.update=function(){if(MLE.mouse.pressed&&MLE.mouse.y>MLE.height/2)window.game.nextScene=new GameScene};
TitleScene.prototype.draw=function(){MLE.context.fillStyle="#333333";MLE.context.fillRect(0,0,MLE.width,MLE.height);MLE.context.fillStyle="#ffffff";MLE.context.textAlign="center";MLE.context.font="italic "+getConst(30)+"px sans-serif";MLE.context.textBaseline="top";MLE.context.fillText("JAKIS TAM EKRAN STARTOWY",MLE.width/2,MLE.height/2);MLE.context.fillText("KLIKNIJ NA DOLE BY PRZEJSC DO GRY!",MLE.width/2,MLE.height/2+getConst(100))};var GameScene=function(a){gameScene=this;this.init(a)};
GameScene.prototype.init=function(a){this.isHard=a?true:false;this.initialCustomerTween=null;this.customersQueue=[];this.createCustomersQueue();this.customers=[];this.chanceForDouble=a?1:0;this.gameOver=false;this.availableIngredientsOnLevel=[[1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1]];this.maxValueForIngredient=[4,2,2,4,4,2,2,4];this.level=0;this.lightedItem=null;this.background=new MLE.Sprite("background",0,0);this.foreground=new MLE.Sprite("foreground",0,0);var b=[{name:"flavor2",x:840,y:244},{name:"flavor1",
x:610,y:93},{name:"flavor3",x:610,y:245},{name:"flavor4",x:840,y:92},{name:"slices4",x:652,y:404},{name:"slices3",x:547,y:404},{name:"slices2",x:652,y:514},{name:"slices1",x:547,y:514},{name:"sprinkles2",x:900,y:537},{name:"sprinkles1",x:792,y:537},{name:"syrup2",x:800,y:408},{name:"syrup1",x:900,y:408}];this.buttons=[];for(var c=0;c<12;c++)this.buttons.push(new IngredientButton(b[c].name,b[c].x,b[c].y));this.iceCream=null;this.bubbleSpeechLeft=new BubbleSpeech(0);this.bubbleSpeechRight=new BubbleSpeech(1);
this.trash=new Trash;this.cashLeft=new Cash(0);this.cashRight=new Cash(1);this.startText=new MLE.Sprite("startText",MLE.width/2,-200);this.startText.centerPivot();this.timeIsUpText=new MLE.Sprite("timeIsUpText",MLE.width/2,-200);this.timeIsUpText.centerPivot();this.timeAndMoneyIndicator=new TimeAndMoneyIndicator;a?this.timeAndMoneyIndicator.setTime(2,30):this.timeAndMoneyIndicator.setTime(1,45);this.paused=false;this.pauseButton=new MLE.Sprite("pauseButton",5,20);this.setPause(true);this.smallLogo=
new SmallLogo;this.smallLogo.sprite.x=380;this.smallLogo.sprite.y=MLE.height-40};GameScene.prototype.update=function(){MLE.mouse.pressed&&MLE.mouse.x<90&&MLE.mouse.y<110&&this.paused===false&&this.gameOver===false&&(this.setPause(true),director.menu.fromGameToPause());for(var a=0;a<this.buttons.length;a++)this.buttons[a].update();for(a=0;a<this.customers.length;a++)this.customers[a].update();this.trash.update();this.cashLeft.update();this.cashRight.update();this.iceCream&&this.iceCream.update();this.timeAndMoneyIndicator.update()};
GameScene.prototype.draw=function(){this.background.draw();for(var a=0;a<this.customers.length;a++)this.customers[a].draw();this.trash.draw();this.foreground.draw();for(a=0;a<this.buttons.length;a++)this.buttons[a].draw();this.cashLeft.draw();this.cashRight.draw();this.bubbleSpeechRight.draw();this.bubbleSpeechLeft.draw();this.timeAndMoneyIndicator.draw();this.iceCream&&this.iceCream.draw();this.pauseButton.draw();this.startText.draw();this.timeIsUpText.draw();this.smallLogo.draw()};
GameScene.prototype.addIngredient=function(a){this.iceCream.addIngredient(a,true)};
GameScene.prototype.randomIceCreamToOrder=function(){var a=0,b,c=4;this.availableIngredientsOnLevel[this.level][3]==1&&this.availableIngredientsOnLevel[this.level][7]==1&&(b=Math.random(),b<this.chanceForDouble&&(c=8));for(b=0;b<c;b++)if(this.availableIngredientsOnLevel[this.level][b]==1){var e=Math.floor(Math.random()*(this.maxValueForIngredient[b]+0.99));b==3&&c==8&&(e=0);if(b==0||b==4)e=1+Math.floor(Math.random()*(this.maxValueForIngredient[b]-0.01));a+=Math.pow(10,b)*e}return a};
GameScene.prototype.createCustomersQueue=function(){this.customersQueue=[1,2,3,4,5];this.customersQueue=shuffleArray(this.customersQueue)};GameScene.prototype.startInitialCustomers=function(){var a=Math.round(Math.random());this.startNextCustomer(a);a=Math.pow(a-1,2);this.initialCustomerTween=createjs.Tween.get({}).wait(2E3).call(function(){this.startNextCustomer(a)}.bind(this))};
GameScene.prototype.startNextCustomer=function(a){var b=this.customersQueue.shift(),b=new Customer(b);b.startCustomer(a);this.customers.push(b)};GameScene.prototype.putCustomerToQueue=function(a,b){this.customersQueue.push(a);this.startNextCustomer((b+1)/2)};
GameScene.prototype.showStartText=function(){var a=this.startText;a.alpha=1;a.y=-200;a.scaleX=a.scaleY=1;this.startTextTween=createjs.Tween.get(a).to({y:MLE.height/2},500,createjs.Ease.backOut).wait(700).to({scaleX:5,scaleY:5,alpha:0},400,createjs.Ease.sineOut).call(function(){console.log("START GAME");this.setPause(false);this.iceCream=new IceCream;this.startInitialCustomers()}.bind(this))};
GameScene.prototype.showTimeIsUpText=function(){this.gameOver=true;var a=this.timeIsUpText;a.alpha=1;a.y=-200;a.scaleX=a.scaleY=1;this.timeIsUpTween=createjs.Tween.get(a).to({y:MLE.height/2},500,createjs.Ease.backOut).wait(700).to({scaleX:5,scaleY:5,alpha:0},400,createjs.Ease.sineOut).call(function(){console.log("TIME IS UP GAME");director.menu.fromGameToGameOver()}.bind(this))};
GameScene.prototype.setPause=function(a){this.paused=a;if(this.initialCustomerTween)this.initialCustomerTween._paused=a;this.iceCream&&this.iceCream.setPause(a);for(var b=0;b<this.customers.length;b++)this.customers[b].setPause(a);for(b=0;b<this.buttons.length;b++)this.buttons[b].setPause(a);this.bubbleSpeechLeft.setPause(a);this.bubbleSpeechRight.setPause(a);this.cashLeft.setPause(a);this.cashRight.setPause(a);this.trash.setPause(a);this.timeAndMoneyIndicator.setPause(a)};
GameScene.prototype.timeIsUp=function(){console.log("Koniec czasu, zblokuj wszystko i jazda!");for(var a=0;a<this.buttons.length;a++)this.buttons[a].setPause(true),this.buttons[a].sprite.scaleX=this.buttons[a].sprite.scaleY=1;if(this.iceCream)this.iceCream.makeBackTween(true),this.iceCream.canBeMoved=false;if(this.lightedItem)this.lightedItem.whiteShadow.alpha=0;this.showTimeIsUpText()};GameScene.prototype.downCallbacks=function(){this.smallLogo.update()};var tutorialPlayed=false;localStorage.IceCreamBoothTutorialPlayed&&localStorage.IceCreamBoothTutorialPlayed==="1"&&(tutorialPlayed=true);var TutorialScene=function(a){tutorialScene=gameScene=this;this.init(a)};
TutorialScene.prototype.init=function(a){this.back=a;this.customers=[];this.background=new MLE.Sprite("background",0,0);this.foreground=new MLE.Sprite("foreground",0,0);a=[{name:"flavor2",x:840,y:244},{name:"flavor1",x:610,y:93},{name:"flavor3",x:610,y:245},{name:"flavor4",x:840,y:92},{name:"slices4",x:652,y:404},{name:"slices3",x:547,y:404},{name:"slices2",x:652,y:514},{name:"slices1",x:547,y:514},{name:"sprinkles2",x:900,y:537},{name:"sprinkles1",x:792,y:537},{name:"syrup2",x:800,y:408},{name:"syrup1",
x:900,y:408}];this.buttons=[];for(var b=0;b<12;b++)this.buttons.push(new IngredientButton(a[b].name,a[b].x,a[b].y));this.iceCream=null;this.bubbleSpeechRight=new BubbleSpeech(1);this.trash=new Trash;this.cashRight=new Cash(1);this.timeAndMoneyIndicator=new TimeAndMoneyIndicator;this.timeAndMoneyIndicator.setTime(1,30);this.customers.push(new Customer(Math.floor(Math.random()*5)+1));this.tutorialText1=new MLE.Sprite("tutorialText1",250,100);this.tutorialText1.centerPivot();this.tutorialText1.alpha=
0;this.tutorialText2=new MLE.Sprite("tutorialText2",725,325);this.tutorialText2.centerPivot();this.tutorialText2.alpha=0;this.tutorialText3=new MLE.Sprite("tutorialText3",480,50);this.tutorialText3.centerPivot();this.tutorialText3.alpha=0;this.tutorialText4=new MLE.Sprite("tutorialText4",725,325);this.tutorialText4.centerPivot();this.tutorialText4.alpha=0;this.tapToContinue=new MLE.Sprite("tapToContinue",720,605);this.tapToContinue.centerPivot();this.tapToContinue.alpha=0;this.hand=new MLE.Sprite("tapInstruction",
0,0);this.hand.pivotX=25;this.hand.pivotY=-5;this.hand.alpha=0;this.phase=1;this.customers[0].placeOnTutorial();this.iceCream=new IceCream;createjs.Tween.get(this).wait(2E3).call(this.startPhase1,null,this);this.smallLogo=new SmallLogo;this.smallLogo.sprite.x=380;this.smallLogo.sprite.y=MLE.height-40};
TutorialScene.prototype.update=function(){if(this.phase===1&&this.tapToContinue.alpha===1&&MLE.mouse.released)this.startPhase2();else if(this.phase===2&&this.tapToContinue.alpha===1&&MLE.mouse.released)this.startPhase3();else if(this.phase===3&&this.tapToContinue.alpha===1&&MLE.mouse.released)this.tutorialEnded(),tutorialPlayed=true,localStorage.IceCreamBoothTutorialPlayed="1"};
TutorialScene.prototype.draw=function(){this.background.draw();for(var a=0;a<this.customers.length;a++)this.customers[a].draw();this.trash.draw();this.foreground.draw();for(a=0;a<this.buttons.length;a++)this.buttons[a].draw();this.cashRight.draw();this.bubbleSpeechRight.draw();this.timeAndMoneyIndicator.draw();this.iceCream&&this.iceCream.draw();a=MLE.context.globalAlpha;this.hand.draw();var b=MLE.context.globalAlpha;a!==b&&console.log(a,b,this.hand.alpha);this.tutorialText1.draw();this.tutorialText2.draw();
this.tutorialText3.draw();this.tutorialText4.draw();this.tapToContinue.draw();this.smallLogo.draw()};TutorialScene.prototype.addIngredient=function(a){this.iceCream.addIngredient(a,true)};
TutorialScene.prototype.startPhase1=function(){tutorialPlayed&&createjs.Tween.get(this.tapToContinue).wait(500).to({alpha:1},150);this.iceCream=new IceCream(null,true);this.phase=1;this.tutorialText1.x=-250;createjs.Tween.get(this.tutorialText1).to({x:250,alpha:1},450,createjs.Ease.backOut);this.hand.x=840;this.hand.y=244;var a=350,b=350,c=350,a=200,b=150,c=350;createjs.Tween.get(this,{loop:true}).wait(2*a+0.5*c).call(function(){this.iceCream=new IceCream(null,true)}.bind(this)).wait(150).call(this.buttons[0].fakeOnDown,
null,this.buttons[0]).wait(b+c).call(this.buttons[0].fakeOnUp,null,this.buttons[0]).wait(b+2*c+a).call(this.buttons[10].fakeOnDown,null,this.buttons[10]).wait(b+c).call(this.buttons[10].fakeOnUp,null,this.buttons[10]).wait(b+2*c+a).call(this.customers[0].setHappienes,[5],this.customers[0]).call(this.buttons[9].fakeOnDown,null,this.buttons[9]).wait(b+c).call(this.buttons[9].fakeOnUp,null,this.buttons[9]).wait(b+2*c+a).call(this.buttons[5].fakeOnDown,null,this.buttons[5]).wait(b+c).call(this.buttons[5].fakeOnUp,
null,this.buttons[5]).wait(a+0.5*c+150);createjs.Tween.get(this.hand,{loop:true}).wait(a).to({alpha:1},150).wait(a).to({y:226},c,createjs.Ease.sineInOut).wait(b).to({y:244},c,createjs.Ease.sineInOut).wait(a).to({x:800,y:408},c,createjs.Ease.sineInOut).wait(b).to({y:390},c,createjs.Ease.sineInOut).wait(b).to({y:408},c,createjs.Ease.sineInOut).wait(a).to({x:792,y:537},c,createjs.Ease.sineInOut).wait(b).to({y:519},c,createjs.Ease.sineInOut).wait(b).to({y:537},350,createjs.Ease.sineInOut).wait(a).to({x:547,
y:404},c,createjs.Ease.sineInOut).wait(b).to({y:386},c,createjs.Ease.sineInOut).wait(b).to({y:404},c,createjs.Ease.sineInOut).wait(a).to({alpha:0},150).call(function(){this.tapToContinue.alpha===0&&createjs.Tween.get(this.tapToContinue).to({alpha:1},150)}.bind(this))};
TutorialScene.prototype.startPhase2=function(){this.phase=2;createjs.Tween.get(this.tapToContinue).to({alpha:0},150).call(function(){createjs.Tween.removeTweens(this.hand);createjs.Tween.removeTweens(this);createjs.Tween.removeTweens(this.tapToContinue);this.iceCream=new IceCream(1214,true);this.hand.x=240;this.hand.y=345;this.secondPhaseLoop();tutorialPlayed&&createjs.Tween.get(this.tapToContinue).wait(500).to({alpha:1},150)}.bind(this));createjs.Tween.get(this.hand).to({alpha:0},150);this.tutorialText1.x=
250;createjs.Tween.get(this.tutorialText1).to({x:-250,alpha:0},450,createjs.Ease.backIn);this.tutorialText4.x=1155;createjs.Tween.get(this.tutorialText4).wait(350).to({x:725,alpha:1},450,createjs.Ease.backOut)};
TutorialScene.prototype.secondPhaseLoop=function(){this.hand.x=240;this.hand.y=345;createjs.Tween.get(this.customers[0],{loop:true}).wait(1500).call(function(){this.customers[0].whiteShadow.alpha=1}.bind(this)).wait(675).call(function(){this.customers[0].whiteShadow.alpha=0;this.customers[0].setHappienes(4);this.customers[0].setFace(1)}.bind(this)).wait(3525).call(function(){this.customers[0].whiteShadow.alpha=0;this.customers[0].setHappienes(5);this.customers[0].setFace(0)}.bind(this));createjs.Tween.get(this.iceCream.group,
{loop:true}).wait(4300).call(function(){this.trash.whiteShadow.alpha=1}.bind(this)).wait(475).call(function(){this.trash.whiteShadow.alpha=0}.bind(this)).wait(500).wait(425);createjs.Tween.get(this.iceCream.group,{loop:true}).wait(1300).to({x:320,y:315},350,createjs.Ease.sineInOut).wait(475).to({x:240,y:400},1025,createjs.Ease.elasticOut).wait(950).to({x:130,y:645},350,createjs.Ease.sineInOut).wait(325).to({pivotY:-100,y:545}).to({angle:-450,scaleX:0.1,scaleY:0.1,alpha:0.5,x:120,y:580},500).wait(425).to({pivotY:0,
scaleX:1,scaleY:1,x:240,y:400,alpha:1,angle:0});createjs.Tween.get(this.hand,{loop:true}).wait(500).to({alpha:1},150).wait(150).to({y:327},350,createjs.Ease.sineInOut).wait(150).to({x:320,y:240},350,createjs.Ease.sineInOut).wait(300).to({y:258},350,createjs.Ease.sineInOut).wait(800).to({x:240,y:345},350,createjs.Ease.sineInOut).wait(150).to({y:327},350,createjs.Ease.sineInOut).wait(150).to({x:130,y:570},350,createjs.Ease.sineInOut).wait(150).to({y:588},350,createjs.Ease.sineInOut).wait(600).to({alpha:0},
150).call(function(){this.tapToContinue.alpha===0&&createjs.Tween.get(this.tapToContinue).to({alpha:1},150)}.bind(this))};
TutorialScene.prototype.startPhase3=function(){this.phase=3;createjs.Tween.get(this.tapToContinue).to({alpha:0},150).call(function(){createjs.Tween.removeTweens(this.hand);createjs.Tween.removeTweens(this);createjs.Tween.removeTweens(this.tapToContinue);createjs.Tween.removeTweens(this.iceCream.group);createjs.Tween.removeTweens(this.customers[0]);this.customers[0].setFace(0);this.customers[0].setHappienes(5);this.customers[0].whiteShadow.alpha=0;this.trash.whiteShadow.alpha=0;this.iceCream=new IceCream(3122,
true);this.hand.x=240;this.hand.y=345;this.thirdPhaseLoop();tutorialPlayed&&createjs.Tween.get(this.tapToContinue).wait(500).to({alpha:1},150)}.bind(this));createjs.Tween.get(this.hand).to({alpha:0},150);this.tutorialText4.x=725;createjs.Tween.get(this.tutorialText4).to({x:1155,alpha:0},450,createjs.Ease.backIn);this.tutorialText2.x=1155;createjs.Tween.get(this.tutorialText2).wait(350).to({x:725,alpha:1},450,createjs.Ease.backOut);this.tutorialText3.y=-200;createjs.Tween.get(this.tutorialText3).wait(350).to({y:50,
alpha:1},450,createjs.Ease.backOut)};
TutorialScene.prototype.thirdPhaseLoop=function(){this.hand.x=240;this.hand.y=345;createjs.Tween.get(this.customers[0],{loop:true}).wait(1500).call(function(){this.customers[0].whiteShadow.alpha=1}.bind(this)).wait(675).call(function(){this.setFace(3);this.whiteShadow.alpha=0;this.heartsTween=createjs.Tween.get(this.heartsGroup).wait(0).to({alpha:0},350,createjs.Ease.sineInOut).wait(1E3);gameScene.bubbleSpeechRight.makeHideTween();gameScene.cashRight.makeShowTween(this.currentHappienes,this.orderedIceCreamType)}.bind(this.customers[0])).wait(2875).call(function(){this.customers[0].whiteShadow.alpha=
0;this.customers[0].setHappienes(5);this.customers[0].setFace(0);this.customers[0].fakeGotToTable()}.bind(this));createjs.Tween.get(this.iceCream.group,{loop:true}).wait(1300).to({x:320,y:315},350,createjs.Ease.sineInOut).wait(475).to({alpha:0}).wait(2925);createjs.Tween.get(this.hand,{loop:true}).wait(500).to({alpha:1},150).wait(150).to({y:327},350,createjs.Ease.sineInOut).wait(150).to({x:320,y:240},350,createjs.Ease.sineInOut).wait(300).to({y:258},350,createjs.Ease.sineInOut).wait(800).to({x:340,
y:320},350,createjs.Ease.sineInOut).wait(150).call(function(){createjs.Tween.get(this).wait(175).call(function(){this.cashRight.fakeOnDown()}.bind(this))}.bind(this)).to({y:302},350,createjs.Ease.sineInOut).wait(150).to({y:320},350,createjs.Ease.sineInOut).wait(450).to({alpha:0},150).call(function(){this.tapToContinue.alpha===0&&createjs.Tween.get(this.tapToContinue).to({alpha:1},150)}.bind(this))};
TutorialScene.prototype.tutorialEnded=function(){createjs.Tween._tweens=[];if(this.back===0)director.menu.mainMenu.active=false,director.menu.mainMenu.visible=true,createjs.Tween.get(director).to({rectAlpha:1},250,createjs.Ease.sineInOut).call(function(){director.nextScene=director.menu;director.menu.mainMenu.show()}).to({rectAlpha:0},500,createjs.Ease.sineInOut);else if(this.back===1){var a=new GameScene;createjs.Tween.get(director).to({rectAlpha:1},250,createjs.Ease.sineInOut).call(function(){director.nextScene=
a}).to({rectAlpha:0},500,createjs.Ease.sineInOut).call(function(){a.showStartText()})}else this.back===2&&(a=new GameScene(true),createjs.Tween.get(director).to({rectAlpha:1},250,createjs.Ease.sineInOut).call(function(){director.nextScene=a}).to({rectAlpha:0},500,createjs.Ease.sineInOut).call(function(){a.showStartText()}))};TutorialScene.prototype.downCallbacks=function(){this.smallLogo.update()};var Menu=function(){window.menu=this;this.init()};Menu.prototype.init=function(){localStorage.IceCreamBoothHighScore||(localStorage.IceCreamBoothHighScore=50);this.background=new MLE.Sprite("menuBackground",0,0);this.mainMenu=new MainMenu;this.credits=new CreditsMenu;this.record=new RecordMenu;this.pause=new PauseMenu;this.gameOver=new GameOverMenu;this.mainMenu.show();this.smallLogo=new SmallLogo;this.smallLogo.sprite.x=MLE.width-70;this.smallLogo.sprite.y=MLE.height-40};
Menu.prototype.update=function(){this.mainMenu.update();this.credits.update();this.record.update();this.pause.update();this.gameOver.update()};Menu.prototype.draw=function(){this.background.draw();this.mainMenu.draw();this.credits.draw();this.record.draw();this.pause.draw();this.gameOver.draw();this.smallLogo.draw()};
Menu.prototype.playEasyClicked=function(){if(tutorialPlayed===false)this.tutorialClicked(1);else{var a=new GameScene;this.mainMenu.active=false;createjs.Tween.get(director).to({rectAlpha:1},250,createjs.Ease.sineInOut).call(function(){director.nextScene=a}).to({rectAlpha:0},500,createjs.Ease.sineInOut).call(function(){a.showStartText()})}};
Menu.prototype.playHardClicked=function(){if(tutorialPlayed===false)this.tutorialClicked(2);else{var a=new GameScene(true);this.mainMenu.active=false;createjs.Tween.get(director).to({rectAlpha:1},250,createjs.Ease.sineInOut).call(function(){director.nextScene=a}).to({rectAlpha:0},500,createjs.Ease.sineInOut).call(function(){a.showStartText()})}};
Menu.prototype.tutorialClicked=function(a){a||(a=0);var b=new TutorialScene(a);this.mainMenu.active=false;createjs.Tween.get(director).to({rectAlpha:1},250,createjs.Ease.sineInOut).call(function(){director.nextScene=b}).to({rectAlpha:0},500,createjs.Ease.sineInOut).call(function(){})};Menu.prototype.creditsClicked=function(){this.fromMainMenuToWindow(this.credits)};Menu.prototype.recordClicked=function(){this.record.result.text="$"+localStorage.IceCreamBoothHighScore;this.fromMainMenuToWindow(this.record)};
Menu.prototype.backClickedInCredits=function(){this.fromWindowToMainMenu(this.credits)};Menu.prototype.backClickedInRecords=function(){this.fromWindowToMainMenu(this.record)};Menu.prototype.mainMenuClickedInPause=function(){this.fromWindowToMainMenu(this.pause)};Menu.prototype.resumeClickedInPause=function(){this.fromPauseToGame()};
Menu.prototype.restartClickedInPause=function(){var a=new GameScene(gameScene.isHard);this.pause.active=false;createjs.Tween.get(director).to({rectAlpha:1},250,createjs.Ease.sineInOut).call(function(){director.nextScene=a}).to({rectAlpha:0},500,createjs.Ease.sineInOut).call(function(){gameScene.showStartText()})};Menu.prototype.mainMenuClickedInGameOver=function(){this.fromWindowToMainMenu(this.gameOver)};
Menu.prototype.tryAgainClickedInGameOver=function(){var a=new GameScene(gameScene.isHard);this.pause.active=false;createjs.Tween.get(director).to({rectAlpha:1},250,createjs.Ease.sineInOut).call(function(){director.nextScene=a}).to({rectAlpha:0},500,createjs.Ease.sineInOut).call(function(){gameScene.showStartText()})};Menu.prototype.fromWindowToMainMenu=function(a){a.hide();createjs.Tween.get(this).wait(500).call(function(){this.mainMenu.show()}.bind(this))};
Menu.prototype.fromMainMenuToWindow=function(a){this.mainMenu.hide();createjs.Tween.get(this).wait(700).call(function(){a.show()}.bind(this))};
Menu.prototype.fromGameToPause=function(){var a=gameScene.timeAndMoneyIndicator.money,b=gameScene.timeAndMoneyIndicator.getTimeString();this.pause.money.text="$"+a;this.pause.time.text=b;this.gameCache=gameScene;this.mainMenu.visible=false;this.credits.visible=false;this.record.visible=false;this.pause.visible=false;this.gameOver.visible=false;this.mainMenu.active=false;this.credits.active=false;this.record.active=false;this.pause.active=false;this.gameOver.active=false;createjs.Tween.get(director).to({rectAlpha:1},
250,createjs.Ease.sineInOut).call(function(){director.nextScene=director.menu;this.pause.visible=true;this.pause.show()}.bind(this)).to({rectAlpha:0},500,createjs.Ease.sineInOut).call(function(){director.menu.pause.active=true})};Menu.prototype.fromPauseToGame=function(){createjs.Tween.get(director).to({rectAlpha:1},250,createjs.Ease.sineInOut).call(function(){director.nextScene=this.gameCache}.bind(this)).to({rectAlpha:0},500,createjs.Ease.sineInOut).call(function(){gameScene.setPause(false)})};
Menu.prototype.fromGameToGameOver=function(){var a=gameScene.timeAndMoneyIndicator.money;a>Number(localStorage.IceCreamBoothHighScore)?(localStorage.IceCreamBoothHighScore=a,this.gameOver.newHighscore.text="This is new highscore! Great job!"):this.gameOver.newHighscore.text="";this.gameOver.result.text="$"+a;this.gameCache=gameScene;this.mainMenu.visible=false;this.credits.visible=false;this.record.visible=false;this.pause.visible=false;this.gameOver.visible=false;this.mainMenu.active=false;this.credits.active=
false;this.record.active=false;this.pause.active=false;this.gameOver.active=false;createjs.Tween.get(director).to({rectAlpha:1},250,createjs.Ease.sineInOut).call(function(){director.nextScene=director.menu;this.gameOver.visible=true;this.gameOver.show()}.bind(this)).to({rectAlpha:0},500,createjs.Ease.sineInOut).call(function(){director.menu.gameOver.active=true})};
Menu.prototype.downCallbacks=function(){this.smallLogo.update();this.mainMenu.update2();this.credits.update2();this.record.update2();this.pause.update2();this.gameOver.update2()};var MenuButton=function(a){this.init(a)};
MenuButton.prototype.init=function(a){this.group=new MLE.Group;this.buttonDown=this.buttonUp=null;this.touchEventTarget=new MLE.TouchEventTarget(this.group);this.touchEventTarget.onDown=this.onDown.bind(this);this.touchEventTarget.onUp=this.onUp.bind(this);this.touchEventTarget.onOut=this.onOut.bind(this);a==="creditsBtn"||a==="recordBtn"?(this.buttonUp=new MLE.Sprite("buttonSmallNormal",0,0),this.buttonDown=new MLE.Sprite("buttonSmallDown",0,0)):(this.buttonUp=new MLE.Sprite("buttonBigNormal",0,
0),this.buttonDown=new MLE.Sprite("buttonBigDown",0,0));var b=this.buttonUp.rect.w+10,c=this.buttonUp.rect.h+10;this.touchEventTarget.setArea(-b/2,-c/2,b,c);this.buttonUp.centerPivot();this.buttonDown.centerPivot();this.buttonDown.alpha=0;this.textButton=new MLE.Sprite(a,0,0);this.textButton.centerPivot();this.group.addChild(this.buttonUp);this.group.addChild(this.buttonDown);this.group.addChild(this.textButton);this.canBePressed=false;this.name=a};
MenuButton.prototype.update=function(){this.name!=="moreGamesBtn"&&this.touchEventTarget.update()};MenuButton.prototype.update2=function(){this.name==="moreGamesBtn"&&this.touchEventTarget.update()};MenuButton.prototype.draw=function(){this.group.draw()};MenuButton.prototype.onUp=function(){if(this.canBePressed)this.clickCallback(),this.canBePressed=false,this.buttonUp.alpha=1,this.buttonDown.alpha=0};
MenuButton.prototype.onDown=function(){this.name==="moreGamesBtn"?gotoSpilSite2():(this.canBePressed=true,this.buttonUp.alpha=0,this.buttonDown.alpha=1)};MenuButton.prototype.onOut=function(){this.canBePressed=false;this.buttonUp.alpha=1;this.buttonDown.alpha=0};MenuButton.prototype.clickCallback=function(){};var MainMenu=function(){this.init()};
MainMenu.prototype.init=function(){this.active=this.visible=false;this.group=new MLE.Group;this.character=new MLE.Sprite("character",0,0);this.titleMenu=new MLE.Sprite("titleMenu",0,0);this.group.addChild(this.character);this.group.addChild(this.titleMenu);this.buttons=[];this.buttons[0]=new MenuButton("playEasyBtn");this.buttons[0].clickCallback=menu.playEasyClicked.bind(menu);this.buttons[1]=new MenuButton("playHardBtn");this.buttons[1].clickCallback=menu.playHardClicked.bind(menu);this.buttons[2]=
new MenuButton("tutorialBtn");this.buttons[2].clickCallback=menu.tutorialClicked.bind(menu);this.buttons[3]=new MenuButton("moreGamesBtn");this.buttons[3].clickCallback=gotoSpilSite;this.buttons[4]=new MenuButton("creditsBtn");this.buttons[4].clickCallback=menu.creditsClicked.bind(menu);this.buttons[5]=new MenuButton("recordBtn");this.buttons[5].clickCallback=menu.recordClicked.bind(menu);for(var a=0;a<this.buttons.length;a++)this.group.addChild(this.buttons[a])};
MainMenu.prototype.update=function(){if(this.active)for(var a=0;a<this.buttons.length;a++)this.buttons[a].update()};MainMenu.prototype.update2=function(){if(this.active)for(var a=0;a<this.buttons.length;a++)this.buttons[a].update2()};MainMenu.prototype.draw=function(){this.visible&&this.group.draw()};
MainMenu.prototype.show=function(){this.active=false;this.visible=true;this.character.x=1E3;createjs.Tween.get(this.character).wait(150).to({x:640},600,createjs.Ease.sineInOut);this.titleMenu.x=64;this.titleMenu.y=50;this.titleMenu.alpha=0;createjs.Tween.get(this.titleMenu).wait(200).to({alpha:1},400,createjs.Ease.sineInOut);for(var a=0;a<4;a++)this.buttons[a].group.x=320,this.buttons[a].group.y=a*79+268,this.buttons[a].group.alpha=0,createjs.Tween.get(this.buttons[a].group).wait(a*50+400).to({y:183+
a*91,alpha:1},300,createjs.Ease.sineInOut);this.buttons[4].group.x=250;this.buttons[4].group.y=584;this.buttons[4].group.alpha=0;createjs.Tween.get(this.buttons[4].group).wait(600).to({y:547,alpha:1},300,createjs.Ease.sineInOut);this.buttons[5].group.x=390;this.buttons[5].group.y=584;this.buttons[5].group.alpha=0;createjs.Tween.get(this.buttons[5].group).wait(600).to({y:547,alpha:1},300,createjs.Ease.sineInOut).call(function(){this.active=true}.bind(this))};
MainMenu.prototype.hide=function(){this.active=false;this.visible=true;this.character.x=638;createjs.Tween.get(this.character).wait(100).to({x:1E3},600,createjs.Ease.sineInOut);this.titleMenu.x=64;this.titleMenu.y=50;this.titleMenu.alpha=1;createjs.Tween.get(this.titleMenu).wait(100).to({x:-400},800,createjs.Ease.backIn);createjs.Tween.get(this.titleMenu).wait(450).to({alpha:0},350);for(var a=0;a<4;a++)this.buttons[a].group.x=320,this.buttons[a].group.y=183+a*91,this.buttons[a].group.alpha=1,createjs.Tween.get(this.buttons[a].group).wait(100).to({x:-144},
800,createjs.Ease.backIn);this.buttons[4].group.x=250;this.buttons[4].group.y=547;this.buttons[4].group.alpha=1;createjs.Tween.get(this.buttons[4].group).wait(100).to({x:-214},800,createjs.Ease.backIn);this.buttons[5].group.x=390;this.buttons[5].group.y=547;this.buttons[5].group.alpha=1;createjs.Tween.get(this.buttons[5].group).wait(100).to({x:-74},800,createjs.Ease.backIn).call(function(){this.visible=false}.bind(this));for(a=0;a<this.buttons.length;a++)createjs.Tween.get(this.buttons[a].group).wait(450).to({alpha:0},
350)};var CreditsMenu=function(){this.init();this.buttons=[];this.buttons[0]=new MenuButton("backBtn");this.buttons[0].clickCallback=menu.backClickedInCredits.bind(menu);this.buttons[1]=new MenuButton("moreGamesBtn");this.buttons[1].clickCallback=gotoSpilSite;for(var a=0;a<this.buttons.length;a++)this.group.addChild(this.buttons[a]);a=new MLE.TextSprite("Code:",-60,40,"26pt Times New Roman","right");this.textBox.addChild(a);a=new MLE.TextSprite("Arts:",-60,100,"26pt Times New Roman","right");this.textBox.addChild(a);
a=new MLE.TextSprite("Jakub Joras",-40,40,"26pt Times New Roman","left");this.textBox.addChild(a);a=new MLE.TextSprite("Michelle Yang",-40,100,"26pt Times New Roman","left");this.textBox.addChild(a);this.normalLogo=new MLE.Sprite("normalLogo",0,-80);this.normalLogo.centerPivot();this.textBox.addChild(this.normalLogo)},RecordMenu=function(){this.init();this.buttons=[];this.buttons[0]=new MenuButton("backBtn");this.buttons[0].clickCallback=menu.backClickedInRecords.bind(menu);this.buttons[1]=new MenuButton("moreGamesBtn");
this.buttons[1].clickCallback=gotoSpilSite;for(var a=0;a<this.buttons.length;a++)this.group.addChild(this.buttons[a]);a=new MLE.TextSprite("Highscore:",0,-100,"34pt Times New Roman");this.textBox.addChild(a);a=new MLE.TextSprite("Your best result is:",0,-20,"24pt Times New Roman");this.textBox.addChild(a);this.result=new MLE.TextSprite("$100",0,50,"32pt Times New Roman");this.textBox.addChild(this.result);a=new MLE.TextSprite("You can make even more!",0,120,"24pt Times New Roman");this.textBox.addChild(a)},
PauseMenu=function(){this.init();this.buttons=[];this.buttons[0]=new MenuButton("mainMenuBtn");this.buttons[0].clickCallback=menu.mainMenuClickedInPause.bind(menu);this.buttons[1]=new MenuButton("resumeBtn");this.buttons[1].clickCallback=menu.resumeClickedInPause.bind(menu);this.buttons[2]=new MenuButton("restartBtn");this.buttons[2].clickCallback=menu.restartClickedInPause.bind(menu);this.buttons[3]=new MenuButton("moreGamesBtn");this.buttons[3].clickCallback=gotoSpilSite;for(var a=0;a<this.buttons.length;a++)this.group.addChild(this.buttons[a]);
a=new MLE.TextSprite("Paused",0,-100,"38pt Times New Roman");this.textBox.addChild(a);a=new MLE.TextSprite("Money:",-20,0,"26pt Times New Roman","right");this.textBox.addChild(a);a=new MLE.TextSprite("Time:",-20,70,"26pt Times New Roman","right");this.textBox.addChild(a);this.money=new MLE.TextSprite("$100",20,0,"26pt Times New Roman","left");this.textBox.addChild(this.money);this.time=new MLE.TextSprite("02:15",20,70,"26pt Times New Roman","left");this.textBox.addChild(this.time)},GameOverMenu=function(){this.init();
this.buttons=[];this.buttons[0]=new MenuButton("mainMenuBtn");this.buttons[0].clickCallback=menu.mainMenuClickedInGameOver.bind(menu);this.buttons[1]=new MenuButton("tryAgainBtn");this.buttons[1].clickCallback=menu.tryAgainClickedInGameOver.bind(menu);this.buttons[2]=new MenuButton("moreGamesBtn");this.buttons[2].clickCallback=gotoSpilSite;for(var a=0;a<this.buttons.length;a++)this.group.addChild(this.buttons[a]);a=new MLE.TextSprite("Game Over",0,-100,"38pt Times New Roman");this.textBox.addChild(a);
a=new MLE.TextSprite("Your final result is:",0,0,"26pt Times New Roman");this.textBox.addChild(a);this.result=new MLE.TextSprite("$100",0,70,"32pt Times New Roman");this.textBox.addChild(this.result);this.newHighscore=new MLE.TextSprite("This is new highscore! Great job!",0,120,"22pt Times New Roman");this.textBox.addChild(this.newHighscore)};function inherit(a,b){for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c])}var WindowMenu=function(){this.init()};
WindowMenu.prototype.init=function(){this.active=this.visible=false;this.group=new MLE.Group;this.textBox=new MLE.Group;this.textBoxBg=new MLE.Sprite("textBox",0,0);this.textBoxBg.centerPivot();this.textBox.addChild(this.textBoxBg);this.group.addChild(this.textBox);this.buttons=[]};WindowMenu.prototype.update=function(){if(this.active)for(var a=0;a<this.buttons.length;a++)this.buttons[a].update()};WindowMenu.prototype.update2=function(){if(this.active)for(var a=0;a<this.buttons.length;a++)this.buttons[a].update2()};
WindowMenu.prototype.draw=function(){this.visible&&this.group.draw()};
WindowMenu.prototype.show=function(a){a=a||1;this.active=false;this.visible=true;this.textBox.x=600;this.textBox.y=-300;this.textBox.alpha=0;createjs.Tween.get(this.textBox).to({y:300,alpha:1},600*a,createjs.Ease.backOut);var b;this.buttons.length===2?b=[220,380]:this.buttons.length===3?b=[200,300,400]:this.buttons.length===4&&(b=[150,250,350,450]);for(var c=0;c<this.buttons.length;c++)this.buttons[c].group.x=160,this.buttons[c].group.y=b[c],this.buttons[c].group.alpha=0,createjs.Tween.get(this.buttons[c].group).wait(400*
a).to({alpha:1},200*a);createjs.Tween.get(this).wait(900*a).call(function(){this.active=true}.bind(this))};
WindowMenu.prototype.hide=function(){this.active=false;this.visible=true;this.textBox.x=600;this.textBox.y=300;this.textBox.alpha=1;createjs.Tween.get(this.textBox).wait(100).to({y:800,alpha:0},700,createjs.Ease.backIn);var a;this.buttons.length===2?a=[220,380]:this.buttons.length===3?a=[200,300,400]:this.buttons.length===4&&(a=[150,250,350,450]);for(var b=0;b<this.buttons.length;b++)this.buttons[b].group.x=160,this.buttons[b].group.y=a[b],this.buttons[b].group.alpha=1,createjs.Tween.get(this.buttons[b].group).wait(100).to({x:-200},
700);createjs.Tween.get(this).wait(1E3).call(function(){this.visible=false}.bind(this))};inherit(CreditsMenu.prototype,WindowMenu.prototype);inherit(RecordMenu.prototype,WindowMenu.prototype);inherit(PauseMenu.prototype,WindowMenu.prototype);inherit(GameOverMenu.prototype,WindowMenu.prototype);var IngredientButton=function(a,b,c){this.init(a,b,c)};IngredientButton.prototype.init=function(a,b,c){this.sprite=new MLE.Sprite(a,b,c);this.sprite.centerPivot();this.name=a;this.touchEventTarget=new MLE.TouchEventTarget(this.sprite);this.touchEventTarget.onIn=this.onIn.bind(this);this.touchEventTarget.onOut=this.onOut.bind(this);this.touchEventTarget.onUp=this.onUp.bind(this);this.touchEventTarget.onDown=this.onDown.bind(this);this.paused=false};
IngredientButton.prototype.update=function(){this.paused||this.touchEventTarget.update()};IngredientButton.prototype.draw=function(){this.sprite.draw()};IngredientButton.prototype.onDown=function(){console.log("onDown",this.name);this.sprite.scaleX=this.sprite.scaleY=1.08};IngredientButton.prototype.onUp=function(){console.log("onUp",this.name);if(gameScene.iceCream.wasFollowed!==true)this.sprite.scaleX=this.sprite.scaleY=1,gameScene.addIngredient(this.name)};
IngredientButton.prototype.onOut=function(){console.log("onOut",this.name);this.sprite.scaleX=this.sprite.scaleY=1};IngredientButton.prototype.onIn=function(){console.log("onIn",this.name);if(gameScene.iceCream.wasFollowed!==true)this.sprite.scaleX=this.sprite.scaleY=1.08};IngredientButton.prototype.setPause=function(a){this.paused=a};IngredientButton.prototype.fakeOnDown=function(){this.sprite.scaleX=this.sprite.scaleY=1.05};
IngredientButton.prototype.fakeOnUp=function(){this.sprite.scaleX=this.sprite.scaleY=1;gameScene.addIngredient(this.name)};var IceCream=function(a,b){this.init(a,b)};
IceCream.prototype.init=function(a,b){this.group=new MLE.Group;this.wasFollowed=false;this.cone=null;this.cone=a&&a>=1E4?new MLE.Sprite("cone2Crop",0,0):new MLE.Sprite("cone",0,0);this.cone.centerPivot();this.cone.pivotY=this.cone.rect.h;this.group.addChild(this.cone);this.group.x=240;this.group.y=400;this.block=false;this.ingredients=[{name:"flavor1",x:0,y:64},{name:"syrup1",x:0,y:58},{name:"sprinkles1",x:0,y:54},{name:"slices1",x:0,y:45},{name:"flavor2",x:0,y:40},{name:"syrup2",x:0,y:34},{name:"sprinkles2",
x:0,y:30},{name:"slices2",x:0,y:21}];this.allowedIngredients=[true,false,false,false,false,false,false,false];this.recentlyAddedIngredient=0;this.touchEventTarget=new MLE.TouchEventTarget(this.group);this.touchEventTarget.setArea(-40,-170,80,180);this.touchEventTarget.onDown=this.onDown.bind(this);this.canBeMoved=true;this.follow=false;this.offsetY=this.offsetX=0;if(a)this.buildFromType(a),this.canBeMoved=false;else{if(!b)this.group.scaleY=0,this.showCone();this.iceCreamType=0}this.trashTween=this.showConeTween=
this.popTween=this.backTween=null;this.paused=false;if(gameScene.gameOver)this.canBeMoved=false};IceCream.prototype.update=function(){if(!this.paused){if(this.follow&&!this.block)this.group.x=MLE.mouse.x-this.offsetX,this.group.y=MLE.mouse.y-this.offsetY;this.touchEventTarget.update();this.follow&&MLE.mouse.x>480&&this.makeBackTween();if(this.follow&&MLE.mouse.released)this.onUp();if(MLE.mouse.released&&this.wasFollowed)this.wasFollowed=false}};IceCream.prototype.draw=function(){this.group.draw()};
IceCream.prototype.onDown=function(){console.log("IceCreamOnDown!");if(this.canBeMoved&&!this.block)this.offsetX=MLE.mouse.x-this.group.x,this.offsetY=MLE.mouse.y-this.group.y,this.wasFollowed=this.follow=true};IceCream.prototype.onUp=function(){if(!this.block)gameScene.lightedItem!==null?(gameScene.lightedItem.whiteShadow.alpha=0,gameScene.lightedItem.iceCreamDroped(),gameScene.lightedItem=null):this.makeBackTween(),this.follow=false};
IceCream.prototype.makeBackTween=function(a){console.log("BackTWEEN");if(!this.block)this.follow=false,this.backTween=createjs.Tween.get(this.group,{override:true}).to({x:240,y:400},1200,createjs.Ease.elasticOut).call(function(){a&&this.setPause(true)}.bind(this))};
IceCream.prototype.addIngredient=function(a,b){if(!this.block){console.log("Dodaje: ",a);var c=a.substring(0,a.length-1),e=Number(a.substring(a.length-1,a.length)),d={flavor:0,syrup:1,sprinkles:2,slices:3}[c];this.allowedIngredients[d]==false&&(d+=4);if(!(this.allowedIngredients[d]==false||d<this.recentlyAddedIngredient)){var f=new MLE.Sprite(a+"Cone",this.ingredients[d].x,2*this.ingredients[d].y-210);f.centerPivot();this.iceCreamType+=e*Math.pow(10,d);if(d==0)this.group.addChildInBack(f),this.allowedIngredients=
[false,true,true,true,true,false,false,false];else if(d==4)this.group.addChild(f),this.allowedIngredients=[false,false,false,false,false,true,true,true];else{this.group.addChild(f);for(e=this.recentlyAddedIngredient;e<=d;e++)this.allowedIngredients[e]=false}this.recentlyAddedIngredient=d;if(c=="slices")this.allowedIngredients=[false,false,false,false,false,false,false,false],this.recentlyAddedIngredient=10;if(b)this.popTween=createjs.Tween.get(this.group,{override:true}).to({scaleY:0.95},180,createjs.Ease.cubicOut).to({scaleY:1},
180,createjs.Ease.cubicIn)}}};IceCream.prototype.showCone=function(){this.showConeTween=createjs.Tween.get(this.group).to({scaleY:1},750,createjs.Ease.bounceOut)};IceCream.prototype.makeTrashTween=function(){console.log("TrashTWEEN");this.group.pivotY-=100;this.group.y-=100;this.block=true;this.canBeMoved=this.follow=false;this.trashTween=createjs.Tween.get(this.group,{override:true}).to({angle:-450,scaleX:0.1,scaleY:0.1,alpha:0.5,x:120,y:580},500).call(function(){gameScene.iceCream=new IceCream}.bind(this))};
IceCream.prototype.buildFromType=function(a){this.iceCreamType=0;for(var b="flavor,syrup,sprinkles,slices,flavor,syrup,sprinkles,slices".split(","),c=0;c<8;c++){var e=String(a%10),a=Math.floor(a/10);e!=0&&this.addIngredient(b[c]+e,false)}};IceCream.prototype.setPause=function(a){if(this.backTween)this.backTween._paused=a;if(this.popTween)this.popTween._paused=a;if(this.showConeTween)this.showConeTween._paused=a;if(this.trashTween)this.trashTween._paused=a;this.paused=a};var Customer=function(a){this.init(a)};
Customer.prototype.init=function(a){this.goneBack=false;this.type=a;var b=[{x:10,y:40},{x:6,y:42},{x:8,y:38},{x:6,y:42},{x:4,y:54}];this.customer=new MLE.Sprite("customer"+a+"Complete",0,0);this.customer.centerPivot();this.customer.pivotX+=b[a-1].x;this.customer.pivotY+=b[a-1].y;this.whiteShadow=new MLE.Sprite("customer"+a+"White",0,0);this.whiteShadow.centerPivot();this.whiteShadow.pivotX+=b[a-1].x;this.whiteShadow.pivotY+=b[a-1].y;this.group=new MLE.Group;this.group.x=2E3;this.group.y=240;this.group.addChild(this.whiteShadow);
this.group.addChild(this.customer);this.faces=[];for(a=1;a<6;a++)b=new MLE.Sprite("face"+a,0,0),b.centerPivot(),this.group.addChild(b),this.faces.push(b);this.hearts=[];this.heartsGroup=new MLE.Group;for(a=0;a<3;a++)for(var b=["heartEmpty","heartHalf","heartFull"],c=0;c<3;c++){var e=new MLE.Sprite(b[c],a*60-60,-130);e.centerPivot();this.heartsGroup.addChild(e);this.hearts.push(e)}this.heartsPin=new MLE.Pin(this.heartsGroup,this.group,0,0);this.currentFace=0;this.currentHappienes=6;this.countDown=
5E3;this.touchEventTarget=new MLE.TouchEventTarget(this.group);this.touchEventTarget.setArea(-90,-150,160,220);this.touchEventTarget.onIn=this.onIn.bind(this);this.touchEventTarget.onOut=this.onOut.bind(this);this.touchEventTarget.onDown=this.onDown.bind(this);this.touchEventTarget.onUp=this.onUp.bind(this);this.moneyCollectedTween=this.heartsTween=this.upDownTween=this.moveTween=this.faceTween2=this.faceTween=this.happienesTween=null;this.paused=this.waitingForCash=false};
Customer.prototype.update=function(){if(!this.paused){this.heartsPin.update();this.touchEventTarget.update();if(gameScene.iceCream.follow&&this.possibleToBuy&&this.touchEventTarget.isInside)this.whiteShadow.alpha=1,gameScene.lightedItem=this;if(this.possibleToBuy&&(this.countDown-=MLE.tick,this.countDown<0))if(this.countDown+=5E3,this.setHappienes(this.currentHappienes-1),this.currentHappienes===4)this.tweenToFace(1);else if(this.currentHappienes===2)this.tweenToFace(2);else if(this.currentHappienes===
0)console.log("UUUU"),this.possibleToBuy=false,this.goBackUnhappy()}};Customer.prototype.draw=function(){this.group.draw();this.heartsGroup.draw()};Customer.prototype.reset=function(){this.group.x=2E3;this.group.y=240;this.currentFace=0;this.currentHappienes=6;this.whiteShadow.alpha=0;this.heartsGroup.alpha=0;this.setFace(0);this.setHappienes(6)};Customer.prototype.setFace=function(a){for(var b=0;b<this.faces.length;b++)this.faces[b].alpha=0;this.faces[a].alpha=1;this.currentFace=a};
Customer.prototype.tweenToFace=function(a){this.faceTween=createjs.Tween.get(this.faces[this.currentFace]).to({alpha:0},250,createjs.Ease.sineInOut);this.faceTween2=createjs.Tween.get(this.faces[a]).to({alpha:1},250,createjs.Ease.sineInOut);this.currentFace=a};
Customer.prototype.setHappienes=function(a){this.currentHappienes=a;for(var b=[[1,0,0,1,0,0,1,0,0],[0,1,0,1,0,0,1,0,0],[0,0,1,1,0,0,1,0,0],[0,0,1,0,1,0,1,0,0],[0,0,1,0,0,1,1,0,0],[0,0,1,0,0,1,0,1,0],[0,0,1,0,0,1,0,0,1]],c=0;c<this.hearts.length;c++)this.hearts[c].alpha=b[a][c]};
Customer.prototype.placeOnTutorial=function(){this.reset();this.group.scaleX=-1;this.group.x=400;createjs.Tween.get(this.group).to({x:325},1E3,createjs.Ease.sineInOut);var a=this.group.y,b=this.group.y+18;createjs.Tween.get(this.group).to({y:b},500,createjs.Ease.sineInOut).to({y:a},500,createjs.Ease.sineInOut).call(function(){this.fakeGotToTable()}.bind(this))};
Customer.prototype.fakeGotToTable=function(){this.heartsPin.update();createjs.Tween.get(this.heartsGroup).wait(150).to({alpha:1},350,createjs.Ease.sineInOut).wait(200).call(function(){this.possibleToBuy=true}.bind(this));this.orderedIceCreamType=3122;gameScene.bubbleSpeechRight.makeShowTween(new IceCream(this.orderedIceCreamType))};
Customer.prototype.startCustomer=function(a){this.reset();var b;if(a===0)b=[-80,160,1],this.touchEventTarget.setArea(-90,-150,160,220),this.heartsGroup.pivotX=15;else if(a===1)b=[565,325,-1],this.touchEventTarget.setArea(-75,-150,160,220),this.heartsGroup.pivotX=-15;this.group.scaleX=b[2];this.group.x=b[0];this.moveTween=createjs.Tween.get(this.group).to({x:b[1]},3E3,createjs.Ease.sineInOut).call(this.gotToTable.bind(this));this.addUpAndDownTween();this.moneyCollectedTween=createjs.Tween.get(this).wait(1500).call(function(){var a=
false;if(a=this.group.scaleX===1?gameScene.cashLeft.canBeCollected:gameScene.cashRight.canBeCollected)this.moveTween._paused=true,this.waitingForCash=this.upDownTween._paused=true}.bind(this))};
Customer.prototype.goBackCustomer=function(){if(!this.goneBack){this.goneBack=true;var a;this.group.scaleX===1?a=[-80,160,1]:this.group.scaleX===-1&&(a=[565,325,-1]);this.group.scaleX*=-1;this.group.x=a[1];this.moveTween=createjs.Tween.get(this.group).to({x:a[0]},3E3,createjs.Ease.sineInOut).call(function(){gameScene.putCustomerToQueue(this.type,this.group.scaleX)}.bind(this));this.addUpAndDownTween()}};
Customer.prototype.addUpAndDownTween=function(){var a=this.group.y,b=this.group.y+18;this.upDownTween=createjs.Tween.get(this.group).to({y:b},500,createjs.Ease.sineInOut).to({y:a},500,createjs.Ease.sineInOut).to({y:b},500,createjs.Ease.sineInOut).to({y:a},500,createjs.Ease.sineInOut).to({y:b},500,createjs.Ease.sineInOut).to({y:a},500,createjs.Ease.sineInOut)};
Customer.prototype.gotToTable=function(){this.happienesTween=createjs.Tween.get(this.heartsGroup).wait(150).to({alpha:1},350,createjs.Ease.sineInOut).wait(200).call(function(){this.possibleToBuy=true}.bind(this));this.orderedIceCreamType=gameScene.randomIceCreamToOrder();this.group.scaleX===1?gameScene.bubbleSpeechLeft.makeShowTween(new IceCream(this.orderedIceCreamType)):this.group.scaleX===-1&&gameScene.bubbleSpeechRight.makeShowTween(new IceCream(this.orderedIceCreamType))};
Customer.prototype.goBackUnhappy=function(){this.setFace(4);if(gameScene.lightedItem===this)gameScene.lightedItem=null;this.whiteShadow.alpha=0;this.heartsTween=createjs.Tween.get(this.heartsGroup).wait(0).to({alpha:0},350,createjs.Ease.sineInOut).wait(1E3).call(function(){this.goBackCustomer()}.bind(this));this.group.scaleX===1?gameScene.bubbleSpeechLeft.makeHideTween():this.group.scaleX===-1&&gameScene.bubbleSpeechRight.makeHideTween()};
Customer.prototype.onIn=function(){if(gameScene.iceCream.follow&&this.possibleToBuy)this.whiteShadow.alpha=1,gameScene.lightedItem=this};Customer.prototype.onOut=function(){this.whiteShadow.alpha=0;if(gameScene.lightedItem===this)gameScene.lightedItem=null};Customer.prototype.onDown=function(){};Customer.prototype.onUp=function(){};
Customer.prototype.iceCreamDroped=function(){if(this.orderedIceCreamType===gameScene.iceCream.iceCreamType)this.setFace(3),this.heartsTween=createjs.Tween.get(this.heartsGroup).wait(0).to({alpha:0},350,createjs.Ease.sineInOut).wait(1E3).call(function(){this.goBackCustomer()}.bind(this)),this.group.scaleX===1?(gameScene.bubbleSpeechLeft.makeHideTween(),gameScene.cashLeft.makeShowTween(this.currentHappienes,this.orderedIceCreamType)):this.group.scaleX===-1&&(gameScene.bubbleSpeechRight.makeHideTween(),
gameScene.cashRight.makeShowTween(this.currentHappienes,this.orderedIceCreamType)),gameScene.iceCream=new IceCream,this.possibleToBuy=false;else{this.countDown=5E3;this.setHappienes(this.currentHappienes-1);if(this.currentHappienes===4)this.tweenToFace(1);else if(this.currentHappienes===2)this.tweenToFace(2);else if(this.currentHappienes===0)console.log("UUUU"),this.possibleToBuy=false,this.goBackUnhappy();gameScene.iceCream.makeBackTween()}};
Customer.prototype.setPause=function(a){if(this.happienesTween)this.happienesTween._paused=a;if(this.faceTween)this.faceTween._paused=a;if(this.faceTween2)this.faceTween2._paused=a;if(this.moveTween&&!this.waitingForCash)this.moveTween._paused=a;if(this.upDownTween&&!this.waitingForCash)this.upDownTween._paused=a;if(this.heartsTween)this.heartsTween._paused=a;if(this.moneyCollectedTween)this.moneyCollectedTween._paused=a;this.paused=a};var BubbleSpeech=function(a){this.init(a)};BubbleSpeech.prototype.init=function(a){this.group=new MLE.Group;this.type=a;a===0?(this.bubbleSpeech=new MLE.Sprite("speechBubbleLeft",0,0),this.group.x=70):(this.bubbleSpeech=new MLE.Sprite("speechBubbleRight",0,0),this.group.x=410);this.group.y=300;this.group.addChild(this.bubbleSpeech);this.bubbleSpeech.centerPivot();this.group.alpha=0;this.hideTween=this.showTween=this.iceCream=null};BubbleSpeech.prototype.update=function(){};
BubbleSpeech.prototype.draw=function(){this.group.draw()};BubbleSpeech.prototype.makeShowTween=function(a){a.group.x=this.type===1?8:-8;a.group.y=a.iceCreamType<10?60:a.iceCreamType<1E4?72:115;this.iceCream=a;this.group.addChild(a);this.showTween=createjs.Tween.get(this.group).wait(350).to({alpha:1},150,createjs.Ease.sineInOut)};BubbleSpeech.prototype.makeHideTween=function(){this.hideTween=createjs.Tween.get(this.group).wait(0).to({alpha:0},150,createjs.Ease.sineInOut).call(function(){this.group.children.pop()}.bind(this))};
BubbleSpeech.prototype.setPause=function(a){this.paused=true;if(this.showTween)this.showTween._paused=a;if(this.hideTween)this.hideTween._paused=a};var Trash=function(){this.init()};
Trash.prototype.init=function(){this.group=new MLE.Group;this.whiteShadow=new MLE.Sprite("trashWhite",0,0);this.sprite=new MLE.Sprite("trash",0,0);this.whiteShadow.centerPivot();this.whiteShadow.alpha=0;this.sprite.centerPivot();this.group.x=120;this.group.y=600;this.group.addChild(this.whiteShadow);this.group.addChild(this.sprite);this.touchEventTarget=new MLE.TouchEventTarget(this.group);this.touchEventTarget.setArea(-100,-60,200,100);this.touchEventTarget.onIn=this.onIn.bind(this);this.touchEventTarget.onOut=
this.onOut.bind(this);this.paused=false};Trash.prototype.update=function(){this.paused||this.touchEventTarget.update()};Trash.prototype.draw=function(){this.group.draw()};Trash.prototype.onIn=function(){if(gameScene.iceCream.follow)this.whiteShadow.alpha=1,gameScene.lightedItem=this};Trash.prototype.onOut=function(){this.whiteShadow.alpha=0;if(gameScene.lightedItem===this)gameScene.lightedItem=null};Trash.prototype.iceCreamDroped=function(){console.log("Do kosza wyrzucic!");gameScene.iceCream.makeTrashTween()};
Trash.prototype.setPause=function(a){this.paused=a};var Cash=function(a){this.init(a)};
Cash.prototype.init=function(a){this.group=new MLE.Group;this.type=a;this.sprite=new MLE.Sprite("cash",0,0);this.sprite.centerPivot();this.whiteShadow=new MLE.Sprite("cashWhite",0,0);this.whiteShadow.centerPivot();this.group.addChild(this.whiteShadow);this.group.addChild(this.sprite);this.group.x=a===1?340:140;this.group.y=320;this.group.alpha=0;this.touchEventTarget=new MLE.TouchEventTarget(this.group);this.touchEventTarget.setArea(-40,-25,80,50);this.touchEventTarget.onDown=this.onDown.bind(this);
this.paused=this.canBeCollected=false;this.showHideInstructionTween=this.collectTween=this.hideTween=this.blinkTween=this.showTween=null;this.money=0;this.tapInstruction=new MLE.Sprite("tapInstruction",0,0);this.tapInstruction.scaleY=-1;this.tapInstruction.x=-25;this.tapInstructionTween=null;this.tapInstruction.alpha=0;this.group.addChild(this.tapInstruction)};Cash.prototype.update=function(){this.paused||this.touchEventTarget.update()};Cash.prototype.draw=function(){this.group.draw()};
Cash.prototype.onDown=function(){if(!gameScene.iceCream.follow&&this.canBeCollected){createjs.Tween.removeTweens(this.tapInstruction);this.showHideInstructionTween=createjs.Tween.get(this.tapInstruction).to({alpha:0},150,createjs.Ease.sineInOut);this.tapInstructionTween=createjs.Tween.get(this.tapInstruction,{loop:true}).to({y:-20},350,createjs.Ease.sineInOut).to({y:0},350,createjs.Ease.sineInOut);this.canBeCollected=false;createjs.Tween.removeTweens(this.sprite);createjs.Tween.removeTweens(this.whiteShadow);
this.collectTween=this.blinkTween=this.showTween=null;for(var a=this.type===0?1:-1,b=0;b<gameScene.customers.length;b++)if(gameScene.customers[b].group.scaleX===a&&gameScene.customers[b].waitingForCash)gameScene.customers[b].waitingForCash=false,gameScene.customers[b].moveTween._paused=false,gameScene.customers[b].upDownTween._paused=false;this.collectTween=createjs.Tween.get(this.group).wait(150).to({x:90,y:500,alpha:0},500,createjs.Ease.sineInOut).call(function(){gameScene.gameOver||(gameScene.timeAndMoneyIndicator.money+=
this.money)}.bind(this))}};
Cash.prototype.fakeOnDown=function(){createjs.Tween.removeTweens(this.tapInstruction);this.showHideInstructionTween=createjs.Tween.get(this.tapInstruction).to({alpha:0},150,createjs.Ease.sineInOut);this.tapInstructionTween=createjs.Tween.get(this.tapInstruction,{loop:true}).to({y:-20},350,createjs.Ease.sineInOut).to({y:0},350,createjs.Ease.sineInOut);this.canBeCollected=false;createjs.Tween.removeTweens(this.sprite);createjs.Tween.removeTweens(this.whiteShadow);this.collectTween=this.blinkTween=this.showTween=
null;this.collectTween=createjs.Tween.get(this.group).wait(150).to({x:90,y:500,alpha:0},500,createjs.Ease.sineInOut).call(function(){gameScene.gameOver||(gameScene.timeAndMoneyIndicator.money+=this.money)}.bind(this))};
Cash.prototype.makeShowTween=function(a,b){this.group.x=this.type===1?340:140;this.group.y=320;this.whiteShadow.alpha=1;this.sprite.alpha=1;this.money=20-(6-a)*2;b>1E4&&(this.money*=1.5);this.showTween=createjs.Tween.get(this.group).to({alpha:1},350,createjs.Ease.sineInOut).call(function(){this.canBeCollected=true}.bind(this));this.blinkTween=createjs.Tween.get(this.whiteShadow,{loop:true}).wait(1E3).to({alpha:0},200).wait(1E3).to({alpha:1},200);this.showInstructionTween=createjs.Tween.get(this.tapInstruction).wait(6E3).call(function(){if(this.canBeCollected)createjs.Tween.removeTweens(this.tapInstruction),
this.showHideInstructionTween=createjs.Tween.get(this.tapInstruction).to({alpha:1},150,createjs.Ease.sineInOut),this.tapInstruction.y=0,this.tapInstructionTween=createjs.Tween.get(this.tapInstruction,{loop:true}).to({y:-20},350,createjs.Ease.sineInOut).to({y:0},350,createjs.Ease.sineInOut)}.bind(this))};Cash.prototype.makeHideTween=function(){this.hideTween=createjs.Tween.get(this.group).to({alpha:0},150)};
Cash.prototype.setPause=function(a){this.paused=a;if(this.showTween)this.showTween._paused=a;if(this.blinkTween)this.blinkTween._paused=a;if(this.hideTween)this.hideTween._paused=a;if(this.collectTween)this.collectTween._paused=a;if(this.tapInstructionTween)this.tapInstructionTween._paused=a;if(this.showHideInstructionTween)this.showHideInstructionTween._paused=a};var TimeAndMoneyIndicator=function(){this.init()};TimeAndMoneyIndicator.prototype.init=function(){this.minutes=0;this.seconds=5;this.money=0;this.paused=false;this.secondTime=1E3;this.timeIsUpCanBeCalled=true};TimeAndMoneyIndicator.prototype.update=function(){this.paused||(this.secondTime-=MLE.tick,this.secondTime<0&&(this.secondTime+=1E3,this.onSecond()))};
TimeAndMoneyIndicator.prototype.draw=function(){MLE.context.font="28pt Times New Roman";MLE.context.fillStyle="#ff3333";MLE.context.textAlign="center";MLE.context.fillText("$"+this.money,95,517);var a=this.getTimeString();MLE.context.fillText(a,375,517)};TimeAndMoneyIndicator.prototype.getTimeString=function(){var a="";this.minutes<=9&&(a+="0");a+=this.minutes+":";this.seconds<=9&&(a+="0");a+=this.seconds;return a};
TimeAndMoneyIndicator.prototype.onSecond=function(){this.seconds>0?this.seconds-=1:this.minutes>0?(this.minutes-=1,this.seconds=59):this.seconds=this.minutes=0;if(this.minutes==0&&this.seconds==0&&this.timeIsUpCanBeCalled)gameScene.timeIsUp(),this.timeIsUpCanBeCalled=false};TimeAndMoneyIndicator.prototype.setPause=function(a){this.paused=a};TimeAndMoneyIndicator.prototype.setTime=function(a,b){this.minutes=a;this.seconds=b};var SmallLogo=function(){this.init()};SmallLogo.prototype.init=function(){this.sprite=new MLE.Sprite("smallLogo");this.sprite.centerPivot();this.touchEventTarget=new MLE.TouchEventTarget(this.sprite);this.touchEventTarget.onDown=gotoSpilSite2};SmallLogo.prototype.update=function(){this.touchEventTarget.update()};SmallLogo.prototype.draw=function(){this.sprite.draw()};var People={customer1Complete:{frame:{x:154,y:4,w:156,h:221}},customer1White:{frame:{x:650,y:4,w:164,h:229}},customer2Complete:{frame:{x:483,y:4,w:159,h:225}},customer2White:{frame:{x:177,y:241,w:167,h:233}},customer3Complete:{frame:{x:318,y:4,w:157,h:221}},customer3White:{frame:{x:4,y:241,w:165,h:229}},customer4Complete:{frame:{x:822,y:4,w:167,h:226}},customer4White:{frame:{x:352,y:241,w:175,h:234}},customer5Complete:{frame:{x:535,y:241,w:167,h:251}},customer5White:{frame:{x:710,y:241,w:175,h:259}},
face1:{frame:{x:61,y:4,w:20,h:9}},face2:{frame:{x:4,y:4,w:21,h:3}},face3:{frame:{x:33,y:4,w:20,h:9}},face4:{frame:{x:121,y:4,w:25,h:22}},face5:{frame:{x:89,y:4,w:24,h:20}}};var Others={buttonBigDown:{frame:{x:4,y:588,w:279,h:80}},buttonBigNormal:{frame:{x:291,y:588,w:280,h:80}},buttonSmallDown:{frame:{x:857,y:68,w:134,h:80}},buttonSmallNormal:{frame:{x:4,y:193,w:134,h:80}},cash:{frame:{x:872,y:4,w:71,h:42}},cashWhite:{frame:{x:280,y:68,w:79,h:50}},cone:{frame:{x:4,y:68,w:58,h:68}},cone2Crop:{frame:{x:70,y:68,w:58,h:68}},decorations1:{frame:{x:192,y:364,w:77,h:214}},decorations2:{frame:{x:465,y:364,w:83,h:216}},flavor1:{frame:{x:4,y:364,w:180,h:110}},flavor1Cone:{frame:{x:951,
y:4,w:57,h:56}},flavor2:{frame:{x:726,y:193,w:180,h:110}},flavor2Cone:{frame:{x:739,y:4,w:57,h:56}},flavor3:{frame:{x:277,y:364,w:180,h:111}},flavor3Cone:{frame:{x:674,y:4,w:57,h:56}},flavor4:{frame:{x:539,y:193,w:179,h:111}},flavor4Cone:{frame:{x:609,y:4,w:57,h:56}},heartEmpty:{frame:{x:475,y:4,w:59,h:53}},heartFull:{frame:{x:542,y:4,w:59,h:53}},heartHalf:{frame:{x:804,y:4,w:60,h:53}},normalLogo:{frame:{x:579,y:588,w:314,h:160}},pauseButton:{frame:{x:681,y:68,w:85,h:79}},slices1:{frame:{x:208,y:68,
w:64,h:65}},slices1Cone:{frame:{x:421,y:4,w:46,h:48}},slices2:{frame:{x:136,y:68,w:64,h:64}},slices2Cone:{frame:{x:297,y:4,w:51,h:36}},slices3:{frame:{x:439,y:68,w:65,h:64}},slices3Cone:{frame:{x:121,y:4,w:49,h:34}},slices4:{frame:{x:367,y:68,w:64,h:65}},slices4Cone:{frame:{x:178,y:4,w:47,h:39}},speechBubbleLeft:{frame:{x:426,y:193,w:105,h:163}},speechBubbleRight:{frame:{x:313,y:193,w:105,h:163}},sprinkles1:{frame:{x:512,y:68,w:76,h:55}},sprinkles1Cone:{frame:{x:60,y:4,w:53,h:24}},sprinkles2:{frame:{x:596,
y:68,w:77,h:55}},sprinkles2Cone:{frame:{x:4,y:4,w:48,h:22}},syrup1:{frame:{x:229,y:193,w:76,h:152}},syrup1Cone:{frame:{x:233,y:4,w:56,h:30}},syrup2:{frame:{x:146,y:193,w:75,h:151}},syrup2Cone:{frame:{x:356,y:4,w:57,h:30}},tapInstruction:{frame:{x:774,y:68,w:75,h:117}},trash:{frame:{x:556,y:364,w:207,h:117}},trashWhite:{frame:{x:771,y:364,w:207,h:117}}};var Texts={backBtn:{frame:{x:219,y:4,w:108,h:37}},creditsBtn:{frame:{x:109,y:4,w:102,h:21}},mainMenuBtn:{frame:{x:4,y:94,w:236,h:37}},playEasyBtn:{frame:{x:233,y:49,w:222,h:37}},playHardBtn:{frame:{x:463,y:49,w:228,h:36}},recordBtn:{frame:{x:4,y:4,w:97,h:21}},restartBtn:{frame:{x:510,y:4,w:186,h:37}},resumeBtn:{frame:{x:335,y:4,w:167,h:37}},startText:{frame:{x:509,y:94,w:310,h:110}},tapToContinue:{frame:{x:248,y:94,w:253,h:42}},timeIsUpText:{frame:{x:4,y:571,w:592,h:112}},tryAgainBtn:{frame:{x:4,
y:49,w:221,h:37}},tutorialBtn:{frame:{x:704,y:4,w:204,h:37}},tutorialText1:{frame:{x:4,y:391,w:463,h:172}},tutorialText2:{frame:{x:4,y:212,w:449,h:85}},tutorialText3:{frame:{x:4,y:691,w:686,h:85}},tutorialText4:{frame:{x:461,y:212,w:448,h:171}}};var isSmall;if(!window.localStorage)window.localStorage={};var remote={},sponsorLink="http://www.girlsgogames.com/";remote.log=function(){};try{window.console=remote}catch(e$$24){console.log("cannot overwrite existing console object")}
window.onload=function(){var a=(isSmall=false,"mediaSS"),b=isSmall?"preloaderSD":"preloaderHD";MLE.init({preManifest:[{src:"./"+b+"/logo.png",id:"logo"},{src:"./"+b+"/logoSmall.png",id:"smallLogo"},{src:"./"+b+"/progressBar.png",id:"progressBar"},{src:"./"+b+"/rotateLandscape.png",id:"rotate"}],preLoaderScene:PreLoaderScene,manifest:[{src:"./"+a+"/moreGamesBtn.png",id:"moreGamesBtn"},{src:"./"+a+"/background.png",id:"background"},{src:"./"+a+"/foreground.png",id:"foreground"},{src:"./"+a+"/menuBackground.png",
id:"menuBackground"},{src:"./"+a+"/character.png",id:"character"},{src:"./"+a+"/titleMenu.png",id:"titleMenu"},{src:"./"+a+"/textBox.png",id:"textBox"},{src:"./"+a+"/AAAOthers.png",id:"AAAOthers",isSpriteSheet:true,descObj:Others},{src:"./"+a+"/AAAPeople.png",id:"AAAPeople",isSpriteSheet:true,descObj:People},{src:"./"+a+"/AAATexts.png",id:"AAATexts",isSpriteSheet:true,descObj:Texts}],game:Director,height:isSmall?320:640,width:isSmall?480:960,scaling:true,showDebug:false})};
var getConst=function(a){return a*MLE.width/640},gotoSpilSite=function(){},gotoSpilSite2=function(){console.log("GotoSpilSite!!!!");setTimeout(function(){MLE.game.draw();window.open(sponsorLink,"_blank")},250)};function openURL(a){var b=document.createElement("a");b.href=a;b.target="_blank";a=document.getElementById("wrapper");document.body.insertBefore(b,a);b.click()};
